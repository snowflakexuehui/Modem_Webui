(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["d2fe5e13"],{"38b26152":function(e,t,r){r.d(t,"__esModule",{value:!0}),r.e(t,{activatePdpCmd:function(){return eK;},deactivatePdpCmd:function(){return ek;},deletePdpCmd:function(){return eD;},disableDmzIpv4Cmd:function(){return et;},disableDmzIpv6Cmd:function(){return er;},getAirplaneCmd:function(){return j;},getApnCmd:function(){return eb;},getAutoDialStatusCmd:function(){return ef;},getBandQueryCmd:function(){return ty;},getBandSupportCmd:function(){return eE;},getDeleteSmsCmd:function(){return e3;},getDialModeCmd:function(){return eC;},getDialModeOptions:function(){return eA;},getDmzStatusCmd:function(){return X;},getEthDriverCmd:function(){return W;},getHotSwapCmd:function(){return K;},getIccidCmd:function(){return A;},getImsiCmd:function(){return M;},getIpAddrCmd:function(){return tS;},getLockCellCmd:function(){return tA;},getLockCellStatusCmd:function(){return tx;},getNeighbourCellCmd:function(){return eq;},getNetworkTypeCmd:function(){return e0;},getOperatorCmd:function(){return tm;},getPdpActiveCmd:function(){return eR;},getPdpAuthCmd:function(){return tN;},getPdpListCmd:function(){return eQ;},getPerfModeCmd:function(){return B;},getPinStatusCmd:function(){return z;},getQCAINFOCmd:function(){return eZ;},getQENGServingCellCmd:function(){return eX;},getQRSRPCmd:function(){return eO;},getQRSRQCmd:function(){return eH;},getQSINRCmd:function(){return eW;},getRSSICmd:function(){return eU;},getRatOrderCmd:function(){return ei;},getRealtimeRateCmd:function(){return tu;},getRebootCmd:function(){return Y;},getRegStatusCmd:function(){return e5;},getRememberedCommandGroup:function(){return h;},getResetFactoryCmd:function(){return Z;},getRoamPrefCmd:function(){return es;},getSendSmsCmd:function(){return te;},getSignedRateCmds:function(){return tl;},getSimNumCmd:function(){return w;},getSimSlotCmd:function(){return R;},getSmsCenterCmd:function(){return e8;},getSmsEnableCmd:function(){return tr;},getSmsListCmd:function(){return e4;},getSmsStoreCmd:function(){return ta;},getSrvDomainCmd:function(){return eu;},getSystemInfoCmds:function(){return O;},getTempCmds:function(){return tb;},getTrafficStatCmds:function(){return tf;},getUsbModeCmd:function(){return ex;},getUsbModeOptions:function(){return ew;},getVoltageCmd:function(){return S;},modelToCommandGroup:function(){return g;},parseATISystemInfo:function(){return C;},parseAirplane:function(){return I;},parseApn:function(){return ey;},parseAutoDialStatus:function(){return eg;},parseBandQuery:function(){return tC;},parseBandSupport:function(){return ez;},parseDialMode:function(){return eT;},parseDmzStatus:function(){return en;},parseEthDriverList:function(){return H;},parseHotSwap:function(){return G;},parseIccid:function(){return x;},parseImsi:function(){return N;},parseIpAddr:function(){return tT;},parseLockCellStatus:function(){return tM;},parseNeighbourCell:function(){return eL;},parseNetworkType:function(){return e1;},parseOperator:function(){return tp;},parsePdpActive:function(){return ej;},parsePdpAuth:function(){return tQ;},parsePdpList:function(){return eG;},parsePerfMode:function(){return V;},parsePinStatus:function(){return L;},parseQCAINFO:function(){return eY;},parseQENGServingCell:function(){return eJ;},parseQRSRP:function(){return e$;},parseQRSRQ:function(){return eB;},parseQSINR:function(){return eF;},parseRSSI:function(){return eV;},parseRatOrder:function(){return eo;},parseRealtimeRate:function(){return tc;},parseRegStatus:function(){return e2;},parseRoamPref:function(){return ed;},parseSendSmsResult:function(){return tt;},parseSignedRate:function(){return td;},parseSimNum:function(){return Q;},parseSimSlot:function(){return D;},parseSmsCenter:function(){return e9;},parseSmsEnable:function(){return ti;},parseSmsList:function(){return e6;},parseSmsStore:function(){return ts;},parseSrvDomain:function(){return em;},parseSystemInfoMulti:function(){return $;},parseTemp:function(){return th;},parseTrafficStat:function(){return tv;},parseUsbMode:function(){return eN;},parseVoltage:function(){return T;},resetTrafficStatCmds:function(){return tg;},restoreBandCmd:function(){return eP;},setAirplaneCmd:function(){return E;},setApnCmd:function(){return eh;},setAutoDialCmd:function(){return ev;},setBandSupportCmd:function(){return eI;},setDialModeCmd:function(){return eS;},setDmzIpv4Cmd:function(){return J;},setDmzIpv6Cmd:function(){return ee;},setEthDriverCmd:function(){return F;},setHotSwapCmd:function(){return k;},setImeiCmd:function(){return ep;},setPdpAuthCmd:function(){return tw;},setPdpCmd:function(){return e_;},setPerfModeCmd:function(){return U;},setPinDisableCmd:function(){return q;},setPinEnableCmd:function(){return P;},setRatOrderCmd:function(){return ea;},setRememberedCommandGroup:function(){return y;},setRoamPrefCmd:function(){return el;},setSimSlotCmd:function(){return _;},setSmsCenterCmd:function(){return e7;},setSmsEnableCmd:function(){return tn;},setSmsStoreCmd:function(){return to;},setSrvDomainCmd:function(){return ec;},setUsbModeCmd:function(){return eM;}});var n=r("3b63c763");function i(e){var t,r,i,a;let o={0:"1.4MHz",1:"3MHz",2:"5MHz",3:"10MHz",4:"15MHz",5:"20MHz"},s={0:"5MHz",1:"10MHz",2:"15MHz",3:"20MHz",4:"25MHz",5:"30MHz",6:"40MHz",7:"50MHz",8:"60MHz",9:"70MHz",10:"80MHz",11:"90MHz",12:"100MHz",13:"200MHz",14:"400MHz",15:"35MHz",16:"45MHz"},l={0:"15kHz",1:"30kHz",2:"60kHz",3:"120kHz",4:"240kHz"},d=e.split(/\r?\n/).map(e=>e.trim()).filter(Boolean),u={},c=[],m={};for(let e of d)if(e.includes("+QENG:")){if(e.includes('"LTE"')){let r=e.split(","),i=r.findIndex(e=>e.includes('"LTE"')),a=Number(r[i+6]),s={rat:"LTE",duplex:null===(t=r[i+1])||void 0===t?void 0:t.replace(/"/g,""),mcc:r[i+2],mnc:(0,n.formatMNC)(r[i+3]),cellId:r[i+4],pci:r[i+5],earfcn:a,band:r[i+7],ul_bandwidth:o[r[i+8]||""],dl_bandwidth:o[r[i+9]||""],tac:r[i+10],lac:r[i+10],rsrp:r[i+11],rsrq:r[i+12],rssi:r[i+13],sinr:r[i+14],cqi:r[i+15],tx_power:r[i+16],srxlev:r[i+17],scs:void 0};m[a]=s;}if(e.includes('"NR5G-NSA"')){let t=e.split(","),r=t.findIndex(e=>e.includes('"NR5G-NSA"')),i=Number(t[r+7]),a={rat:"NR5G-NSA",mcc:t[r+1],mnc:(0,n.formatMNC)(t[r+2]),pci:t[r+3],rsrp:t[r+4],sinr:t[r+5],rsrq:t[r+6],earfcn:i,band:t[r+8],nr_dl_bandwidth:s[t[r+9]||""],scs:l[t[r+10]||""]};m[i]=a;}if(e.includes('"NR5G-SA"')){let t=e.split(","),i=t.findIndex(e=>e.includes('"NR5G-SA"')),a=Number(t[i+7]),o={rat:"NR5G-SA",duplex:null===(r=t[i+1])||void 0===r?void 0:r.replace(/"/g,""),mcc:t[i+2],mnc:(0,n.formatMNC)(t[i+3]),cellId:t[i+4],pci:t[i+5],tac:t[i+6],earfcn:a,band:t[i+8],nr_dl_bandwidth:s[t[i+9]||""],rsrp:t[i+10],rsrq:t[i+11],sinr:t[i+12],scs:l[t[i+13]||""],srxlev:t[i+14]};m[a]=o;}}for(let e of['"NR5G-SA"','"LTE"','"WCDMA"']){let t=d.find(t=>t.includes("+QENG:")&&t.includes(e));if(!t)continue;let r=t.split(","),m=r.findIndex(t=>t.includes(e));c=r,'"NR5G-SA"'===e?u={rat:"NR5G-SA",duplex:null===(i=r[m+1])||void 0===i?void 0:i.replace(/"/g,""),mcc:r[m+2],mnc:(0,n.formatMNC)(r[m+3]),cellId:r[m+4],pci:r[m+5],tac:r[m+6],earfcn:r[m+7],band:r[m+8],nr_dl_bandwidth:s[r[m+9]||""],rsrp:r[m+10],rsrq:r[m+11],sinr:r[m+12],scs:l[r[m+13]||""],srxlev:r[m+14],rssi:void 0,cqi:void 0,tx_power:void 0,lac:r[m+6]}:'"LTE"'===e?u={rat:"LTE",duplex:null===(a=r[m+1])||void 0===a?void 0:a.replace(/"/g,""),mcc:r[m+2],mnc:(0,n.formatMNC)(r[m+3]),cellId:r[m+4],pci:r[m+5],earfcn:r[m+6],band:r[m+7],ul_bandwidth:o[r[m+8]||""],dl_bandwidth:o[r[m+9]||""],tac:r[m+10],lac:r[m+10],rsrp:r[m+11],rsrq:r[m+12],rssi:r[m+13],sinr:r[m+14],cqi:r[m+15],tx_power:r[m+16],srxlev:r[m+17],scs:void 0}:'"WCDMA"'===e&&(u={rat:"WCDMA",duplex:void 0,mcc:r[m+1],mnc:(0,n.formatMNC)(r[m+2]),lac:r[m+3],cellId:r[m+4],earfcn:r[m+5],pci:r[m+6],band:r[m+7],rscp:r[m+8],ecio:r[m+9],phych:r[m+10],sf:r[m+11],slot:r[m+12],speech_code:r[m+13],com_mod:r[m+14],ul_bandwidth:void 0,dl_bandwidth:void 0,tac:void 0,rsrp:void 0,rsrq:void 0,rssi:void 0,sinr:void 0,cqi:void 0,tx_power:void 0,srxlev:void 0,scs:void 0});break;}let p=d.find(e=>e.includes("+QENG:")&&e.includes('"NR5G-NSA"'));if(p){let e=p.split(","),t=e.findIndex(e=>e.includes('"NR5G-NSA"'));u.nsa={rat:"NR5G-NSA",mcc:e[t+1],mnc:(0,n.formatMNC)(e[t+2]),pci:e[t+3],physicalCellId:e[t+3],rsrp:e[t+4],sinr:e[t+5],rsrq:e[t+6],earfcn:e[t+7],band:e[t+8],dl_bandwidth:s[e[t+9]||""]};}return{primary:u,infoArr:c,byEarfcn:m};}let a={voltage:{get:()=>"AT+CBC",parse:e=>{let t=(0,n.parseResponseByPrefix)(e,"+CBC");return t[0][2]?Number(t[0][2])/1e3:void 0;}},iccid:{get:()=>"AT+ICCID",parse:e=>{let t=e.match(/\+ICCID:\s*(\d+)/);return t?t[1]:void 0;}},imsi:{get:()=>"AT+CIMI",parse:e=>{for(let t of e.split(/\r?\n/).map(e=>e.trim()).filter(Boolean))if(/^\d{14,15}$/.test(t))return t;}},simNum:{get:()=>"AT+CNUM",parse:e=>{let t=e.match(/\+CNUM:\s*[^,]*,"([^"]+)"/);if(t)return t[1].replace(/^(\+86|86)/,"").replace(/"/g,"")||void 0;}},simSlot:{get:()=>"AT+QUIMSLOT?",set:e=>`AT+QUIMSLOT=${"outer"===e?1:2}`,parse:e=>{let t=e.match(/\+QUIMSLOT\s*:\s*(\d)/);if(t)return"1"===t[1]?"outer":"inner";}},hotSwap:{get:()=>"AT+QSIMDET?",set:e=>`AT+QSIMDET=${e?1:0},1`,parse:e=>{let t=e.match(/\+QSIMDET:\s*(\d),(\d+)/);if(t)return"1"==t[1];}},airplane:{get:()=>"AT+CFUN?",set:e=>`AT+CFUN=${e?0:1}`,parse:e=>{let t=e.match(/\+CFUN:\s*(\d)/);if(t)return"0"===t[1]||"4"===t[1];}},pin:{get:()=>'AT+CLCK="SC",2',enable:e=>`AT+CLCK="SC",1,"${e}"`,disable:e=>`AT+CLCK="SC",0,"${e}"`,parse:e=>{let t=e.match(/\+CLCK:\s*(\d)/);if(t)return"1"===t[1];}},systemInfo:{get:()=>["ATI","AT+CGSN"],parse:e=>{let t={manufacturer:"",model:"",firmware:"",imei:""},r=(e[0]||"").split(/\r?\n/).map(e=>e.trim()).filter(Boolean),n=-1;for(let e=0;e<r.length;e++)if(r[e].toLowerCase().includes("quectel")){n=e;break;}if(-1!==n)for(let e of(t.manufacturer=r[n],t.model=r[n+1]||"",r))e.startsWith("Revision:")&&(t.firmware=e.replace("Revision:","").trim());let i=(e[1]||"").match(/(\d{14,17})/);return i&&(t.imei=i[1]),t;}},ethDriver:{get:()=>'AT+QETH="eth_driver"',set:e=>`AT+QETH="eth_driver","${e}",1`,parse:e=>{let t=[];return e.split(/\r?\n/).forEach(e=>{let r=e.match(/\+QETH: ?"eth_driver", ?"([^"]+)", ?(\d)/);if(r){let e="r8125"===r[1].toLowerCase()?"RTL8125 (2.5G)":"r8168"===r[1].toLowerCase()?"RTL8168 (1G)":r[1];t.push({label:e,value:r[1],enabled:"1"===r[2]});}}),t;}},perfMode:{get:()=>"AT+QSCLK?",set:e=>`AT+QSCLK=${e?0:1},1`,parse:e=>{let t=e.match(/\+QSCLK: (\d),/);return!!t&&"0"===t[1];}},simpleCmd:{reset:()=>'AT+QCFG="ResetFactory"',reboot:()=>"AT+CFUN=1,1"},dmz:{get:()=>'AT+QMAP="DMZ"',setIpv4:e=>`AT+QMAP="DMZ",1,4,"${e}"`,setIpv6:e=>`AT+QMAP="DMZ",1,6,"${e}"`,disableIpv4:()=>'AT+QMAP="DMZ",0,4,"0.0.0.0"',disableIpv6:()=>'AT+QMAP="DMZ",0,6,":"::"',parse:e=>{let t=e.split(/\r?\n/),r={enabled:!1,ip:""},n={enabled:!1,ip:""};return t.forEach(e=>{let t=e.match(/\+QMAP: ?"DMZ",(\d),4(?:,"([^"]+)")?/),i=e.match(/\+QMAP: ?"DMZ",(\d),6(?:,"([^"]+)")?/);t&&(r.enabled="1"===t[1],r.ip=t[2]||""),i&&(n.enabled="1"===i[1],n.ip=i[2]||"");}),{ipv4:r,ipv6:n};}},netSys:{getRatOrder:()=>'AT+QNWPREFCFG="rat_acq_order"',setRatOrder:e=>`AT+QNWPREFCFG="mode_pref",${e.join(":")}`,parseRatOrder:e=>{let t=e.match(/\+QNWPREFCFG: ?"rat_acq_order",([A-Z0-9:]+)/);return t?t[1].split(":"):[];},getRoamPref:()=>'AT+QNWPREFCFG="roam_pref"',setRoamPref:e=>`AT+QNWPREFCFG="roam_pref",${e?255:1}`,parseRoamPref:e=>{let t=e.match(/\+QNWPREFCFG: ?"roam_pref",(\d+)/);return!!t&&"255"===t[1];},getSrvDomain:()=>'AT+QNWPREFCFG="srv_domain"',setSrvDomain:e=>`AT+QNWPREFCFG="srv_domain",${e}`,parseSrvDomain:e=>{let t=e.match(/\+QNWPREFCFG: ?"srv_domain",(\d+)/);return t?parseInt(t[1],10):2;}},imei:{set:e=>`AT+EGMR=1,7,"${e}"`},autoDial:{getStatus:()=>'AT+QMAP="auto_connect"',set:e=>[`AT+QMAP="auto_connect",0,${e?1:0}`],parse:e=>{let t=e.match(/\+QMAP: ?"auto_connect",0,(\d)/);return!!t&&"1"===t[1];},getApn:()=>"AT+CGDCONT?",setApn:e=>`AT+CGDCONT=1,"IPV4V6","${e}"`,parseApn:e=>{let t=e.match(/\+CGDCONT: 1,"([^"]+)","([^"]+)"/);return t?{pdpType:t[1],apn:t[2]}:{pdpType:"",apn:""};}},dialMode:{get:()=>['AT+QCFG="pcie/mode"'],set:e=>1===e?['AT+QCFG="pcie/mode",1','AT+QCFG="data_interface",1,0',"AT+QMAPWAC=1"]:['AT+QCFG="pcie/mode",0','AT+QCFG="data_interface",0,0',"AT+QMAPWAC=0"],parse:e=>{let t=e.match(/\+QCFG: ?"pcie\/mode",(\d)/);if(t)return Number(t[1]);},options:[{label:"dialMode.quectel.usbMode",labelKey:"dialMode.quectel.usbMode",value:0},{label:"dialMode.quectel.networkMode",labelKey:"dialMode.quectel.networkMode",value:1}]},usbMode:{get:()=>'AT+QCFG="usbnet"',set:e=>`AT+QCFG="usbnet",${e}`,parse:e=>{let t=e.match(/\+QCFG: ?"usbnet",(\d+)/);if(t)return Number(t[1]);},options:[{label:"usbMode.quectel.qmi",labelKey:"usbMode.quectel.qmi",value:0},{label:"usbMode.quectel.ecm",labelKey:"usbMode.quectel.ecm",value:1},{label:"usbMode.quectel.mbim",labelKey:"usbMode.quectel.mbim",value:2},{label:"usbMode.quectel.rndis",labelKey:"usbMode.quectel.rndis",value:3},{label:"usbMode.quectel.ncm",labelKey:"usbMode.quectel.ncm",value:5}]},pdp:{getList:()=>"AT+CGDCONT?",getActive:()=>"AT+CGACT?",set:({cid:e,type:t,apn:r,addr:n,dataComp:i,headComp:a})=>{let o=`AT+CGDCONT=${e},"${t}","${r}"`;return void 0!==n&&""!==n&&(o+=`,"${n}"`),void 0!==i&&(o+=`,${i}`),void 0!==a&&(o+=`,${a}`),o;},delete:e=>`AT+CGDCONT=${e}`,activate:e=>`AT+CGACT=1,${e}`,deactivate:e=>`AT+CGACT=0,${e}`,parseList:e=>{let t=[];return e.split(/\r?\n/).forEach(e=>{let r=e.match(/\+CGDCONT: (\d+),"([^"]+)","([^"]*)","([^"]*)"(?:,(\d+))?(?:,(\d+))?/);r&&t.push({cid:Number(r[1]),type:r[2],apn:r[3],addr:r[4],dataComp:void 0!==r[5]?Number(r[5]):void 0,headComp:void 0!==r[6]?Number(r[6]):void 0});}),t;},parseActive:e=>{let t={};return e.split(/\r?\n/).forEach(e=>{let r=e.match(/\+CGACT: (\d+),(\d)/);r&&(t[Number(r[1])]="1"===r[2]);}),t;}},pdpAuth:{get:(e=1)=>"",set:(e,t,r,n)=>"",parse:e=>{let t=e.match(/\+CGAUTH:\s*(\d+),(\d+),"(.*?)","(.*?)"/);return t?{cid:Number(t[1]),authType:Number(t[2]),username:t[3],password:t[4]}:{cid:1,authType:0,username:"",password:""};}},lockCell:{get:e=>"lte"===e.lteOrNr?0==e.mode?['AT+QNWLOCK="common/4g",0']:[`AT+QNWLOCK="common/4g",1,${e.earfcn},${e.pci}`]:0==e.mode?['AT+QNWLOCK="common/5g",0']:[`AT+QNWLOCK="common/5g",${e.pci},${e.arfcn},${e.subcarrierSpacing},${e.band}`],getStatus:()=>['AT+QNWLOCK="common/5g"','AT+QNWLOCK="common/4g"'],parseStatus:e=>{let t=e.match(/\+QNWLOCK: ?"common\/4g",(\d+)(?:,(\d+),(\d+))?/),r=e.match(/\+QNWLOCK: ?"common\/5g",(\d+),(\d+),(\d+),(\d+)/);return t?{mode:t[1],rat:"lte",freq:t[2]||"",pci:t[3]||"",subcarrierSpacing:0,band:t[2]?(0,n.parseLockCellBand)(Number(t[2])).band:void 0}:r?{mode:"1",rat:"nr",pci:r[1]||"",freq:r[2]||"",subcarrierSpacing:15===Number(r[3])?0:1,band:r[4]?Number(r[4]):void 0}:null;}},bandSupport:{get:()=>['AT+QNWPREFCFG="lte_band"','AT+QNWPREFCFG="nr5g_band"'],set:e=>{let t=e.filter(e=>e>=101&&e<200).map(e=>e-100).sort((e,t)=>e-t),r=e.filter(e=>String(e).startsWith("50")).map(e=>Number(String(e).slice(2))).sort((e,t)=>e-t),n=[];return t.length>0&&n.push(`AT+QNWPREFCFG="lte_band",${t.join(":")}`),r.length>0&&n.push(`AT+QNWPREFCFG="nr5g_band",${r.map(e=>`${e}`).join(":")}`),n;},parse:e=>{let t=[];for(let r of e.split(/\r?\n/))if(r.includes("lte_band")){let e=r.match(/lte_band",([\d:]+)/);e&&t.push(...e[1].split(":").map(e=>Number(e)+100));}else if(r.includes("nr5g_band")){let e=r.match(/nr5g_band",([\d:]+)/);e&&e[1].split(":").forEach(e=>t.push(Number("50"+Number(e))));}return t;},restore:()=>'AT+QNWPREFCFG="restore_band"'},neighbourCell:{get:()=>['AT+QENG="servingcell"','AT+QENG="neighbourcell";+QNWCFG="nr5g_meas_info",1;+QNWCFG="nr5g_meas_info"'],parse:e=>{let t=e.split(/\r?\n/),r=null;for(let e of['"NR5G-SA"','"NR5G-NSA"','"LTE"','"WCDMA"'])if(t.find(t=>t.includes("+QENG:")&&t.includes('"servingcell"')&&t.includes(e))){'"NR5G-SA"'===e||'"NR5G-NSA"'===e?r="NR5G":'"LTE"'===e?r="LTE":'"WCDMA"'===e&&(r="WCDMA");break;}let i=[];for(let e of t){let t=e.match(/\+QENG: "neighbourcell (intra|inter)","(LTE)",(\d+),(\d+|\-),(\-?\d+|\-),(\-?\d+|\-),(\-?\d+|\-),(\-?\d+|\-),/);if(t&&"LTE"===r){let e;let[r,a,o,s,l,d,u,c,m]=t;"LTE"===o&&(e=(0,n.getLteBandByEarfcn)(Number(s))),i.push({type:a,rat:o,earfcn:Number(s),pci:"-"===l?-1:Number(l),rsrp:"-"===u?void 0:Number(u),rsrq:"-"===d?void 0:Number(d),rssi:"-"===c?void 0:Number(c),sinr:"-"===m?void 0:Number(m),band:e});continue;}let a=e.match(/\+QNWCFG: "nr5g_meas_info",(\d+),(\d+),(\d+|\-),(\-?\d+|\-),(\-?\d+|\-)/);if(a&&"NR5G"===r){let e;let[t,r,o,s,l,d]=a;e=(0,n.getNrBandByArfcn)(Number(o)),i.push({type:r,rat:"NR5G",earfcn:Number(o),pci:"-"===s?-1:Number(s),rsrp:"-"===l?void 0:Number(l),rsrq:"-"===d?void 0:Number(d),band:e});}}return i;}},qrsrp:{get:()=>"AT+QRSRP",parse:e=>{let t=e.match(/\+QRSRP: ([^,]+)/);return t?{value:Number(t[1])}:{};}},qsinr:{get:()=>"AT+QSINR",parse:e=>{let t=e.match(/\+QSINR: ([^,]+)/);return t?{value:Number(t[1])}:{};}},qrsrq:{get:()=>"AT+QRSRQ",parse:e=>{let t=e.match(/\+QRSRQ: ([^,]+)/);return t?{value:Number(t[1])}:{};}},csq:{get:()=>"AT+CSQ",parse:e=>{let t=e.match(/\+CSQ: (\d+),/);if(!t)return{};let r=Number(t[1]),n="";return n=0===r?-113:1===r?-111:r>=2&&r<=30?-113+2*r:31===r?-51:"\u672A\u77E5",{rssi:r,dBm:n};}},qcainfo:{get:()=>['AT+QENG="servingcell"',"AT+QCAINFO"],parse:e=>{let t=Array.isArray(e)&&e[0]||"",r=Array.isArray(e)?e.slice(1).join("\n"):e,{byEarfcn:n}=i(t),a={scc:[]},o=r.split(/\r?\n/),s={0:"5MHz",1:"10MHz",2:"15MHz",3:"20MHz",4:"25MHz",5:"30MHz",6:"40MHz",7:"50MHz",8:"60MHz",9:"70MHz",10:"80MHz",11:"90MHz",12:"100MHz",13:"200MHz",14:"400MHz",15:"35MHz",16:"45MHz"},l={0:"\u914D\u7F6E\u89E3\u9664",1:"\u914D\u7F6E\u5DF2\u53BB\u6FC0\u6D3B",2:"\u914D\u7F6E\u5DF2\u6FC0\u6D3B"};for(let e of o)if(e.includes("PCC")){let t=e.match(/PCC",(\d+),(\d+),"([^"]+)",(\d+)(?:,(\d+))?(?:,(-?\d+))?(?:,(-?\d+))?(?:,(-?\d+))?(?:,(-?\d+))?/);if(t){let e=Number(t[1]),r={earfcn:e,bw:s[Number(t[2])]||Number(t[2]),band:t[3],cellId:Number(t[4]),pci:void 0!==t[5]?Number(t[5]):void 0,rsrp:void 0!==t[6]?Number(t[6]):void 0,rsrq:void 0!==t[7]?Number(t[7]):void 0,rssi:void 0!==t[8]?Number(t[8]):void 0,sinr:void 0!==t[9]?Number(t[9]):void 0},i=n[e];i&&Object.assign(r,Object.fromEntries(Object.entries(i).filter(([e,t])=>"-"!==t&&void 0!==t&&""!==t))),a.pcc=r;}}else if(e.includes("SCC")){let t=e.match(/SCC",(\d+),(\d+),"([^"]+)",(\d+)(?:,(-?\d+))?(?:,(-?\d+))?(?:,(-?\d+))?(?:,(-?\d+))?/);if(t&&10>=Number(t[4])){let e=Number(t[1]),r={earfcn:e,bw:s[Number(t[2])]||Number(t[2]),band:t[3],scell_state:l[Number(t[4])]||Number(t[4]),pci:Number(t[5]),rsrp:void 0!==t[6]?Number(t[6]):void 0,rsrq:void 0!==t[7]?Number(t[7]):void 0,sinr:void 0!==t[8]?Number(t[8]):void 0,rssi:void 0!==t[9]?Number(t[9]):void 0},i=n[e];i&&Object.assign(r,Object.fromEntries(Object.entries(i).filter(([e,t])=>"-"!==t&&void 0!==t&&""!==t))),a.scc.push(r);}else if(t=e.match(/SCC",(\d+),(\d+),"([^"]+)",(\d+)(?:,(-?\d+))?(?:,(-?\d+))?(?:,(-?\d+))?(?:,(-?\d+))?/)){let e=Number(t[1]),r={earfcn:e,bw:s[Number(t[2])]||Number(t[2]),band:t[3],pci:Number(t[4]),rsrp:void 0!==t[5]?Number(t[5]):void 0,rsrq:void 0!==t[6]?Number(t[6]):void 0,sinr:void 0!==t[7]?Number(t[7]):void 0,rssi:void 0!==t[8]?Number(t[8]):void 0},i=n[e];i&&Object.assign(r,Object.fromEntries(Object.entries(i).filter(([e,t])=>"-"!==t&&void 0!==t&&""!==t))),a.scc.push(r);}}return a;}},qengServingCell:{get:()=>'AT+QENG="servingcell"',parse:e=>{let t=i(e);return{...t.primary,infoArr:t.infoArr,byEarfcn:t.byEarfcn};}},networkType:{get:()=>"AT+QNWINFO",parse:e=>{let t=e.match(/\+QNWINFO: ?"([^"]+)"/);return t?t[1]:void 0;}},regStatus:{get:()=>["AT+C5GREG?","AT+CEREG?","AT+CREG?","AT+CGREG?"],parse:e=>{let t=e.match(/\+C5GREG: (\d),(\d)/);if(t)return Number(t[2]);let r=e.match(/\+CEREG: (\d),(\d)/);if(r)return Number(r[2]);let n=e.match(/\+CREG: (\d),(\d)/);if(n)return Number(n[2]);let i=e.match(/\+CGREG: (\d),(\d)/);if(i)return Number(i[2]);}},sms:{getListCmd:()=>["AT+CMGF=0",'AT+CSCS="GSM"',"AT+CMGL=4"],parseList:e=>{let t=[],r=e.split(/\r?\n/).map(e=>e.trim()),i={};for(let e=0;e<r.length;e++){let n=r[e].match(/\+CMGL: (\d+),(\d+),,(\d+)/);n?(void 0!==i.index&&i.pdu&&t.push(i),i={index:Number(n[1]),status:n[2],pdu:"",phone:"",time:"",content:""}):!i||!r[e]||r[e].startsWith("+")||r[e].startsWith("OK")||r[e].startsWith("AT")||(i.pdu=r[e]);}void 0!==i.index&&i.pdu&&t.push(i);let a=t.map(e=>{let t=(0,n.decodeSmsDeliverPdu)(e.pdu||"");return{...e,phone:t.phone,time:t.time,content:t.content};});return(0,n.mergeConcatSmsList)(a);},getDeleteCmd:e=>Array.isArray(e)?e.map(e=>`AT+CMGD=${e}`):[`AT+CMGD=${e}`]},smsCenter:{get:()=>"AT+CSCA?",set:e=>{let t=/^\+?86/.test(e),r=e.startsWith("+")?e:t?"+"+e:e;return`AT+CSCA="${r}",${t?145:161}`;},parse:e=>{let t=e.match(/\+CSCA: "([^"]+)",\s*\d+/);return t?t[1]:void 0;}},sendSms:{get:(e,t,r)=>{let n=e=>e?e.startsWith("86")?e:e.startsWith("+86")?e.slice(1):"86"+e.replace(/^\+/,""):"",i=n(e),a=n(t);return`SEND_SMS,${i},${a},"${r}"`;},parse:e=>/OK/.test(e)},smsEnable:{get:()=>"AT+CSMS?",set:e=>`AT+CSMS=${e?1:0}`,parse:e=>{let t=e.match(/\+CSMS: (\d)/);if(t)return"1"===t[1];}},smsStore:{get:()=>["AT+CPMS?"],set:e=>`AT+CPMS="${e}","${e}","${e}"`,parse:e=>{let t=e.match(/\+CPMS:.*?("SM"|"ME"),\s*(\d+),\s*(\d+),\s*("SM"|"ME"),\s*(\d+),\s*(\d+),\s*("SM"|"ME"),\s*(\d+),\s*(\d+)/);if(t)return{read:{used:Number(t[2]),total:Number(t[3])},write:{used:Number(t[5]),total:Number(t[6])},status:{used:Number(t[8]),total:Number(t[9])},rawArr:t};let r=e.match(/\d+/g);return r&&r.length>=6?{read:{used:Number(r[0]),total:Number(r[1])},write:{used:Number(r[2]),total:Number(r[3])},status:{used:Number(r[4]),total:Number(r[5])},rawArr:r}:{read:{used:0,total:0},write:{used:0,total:0},status:{used:0,total:0},rawArr:[]};}},temp:{get:()=>["AT+QTEMP"],parse:e=>{let t=[],r={"modem-lte-sub6-pa1":{nameKey:"temp.quectel.4gPa1",descriptionKey:"temp.quectel.4gPa1Desc"},"modem-lte-sub6-pa2":{nameKey:"temp.quectel.4gPa2",descriptionKey:"temp.quectel.4gPa2Desc"},"modem-mmw0":{nameKey:"temp.quectel.mmw0",descriptionKey:"temp.quectel.mmw0Desc"},"modem-tcxo":{nameKey:"temp.quectel.tcxo",descriptionKey:"temp.quectel.tcxoDesc"},"aoss-0-usr":{nameKey:"temp.quectel.aoss",descriptionKey:"temp.quectel.aossDesc"},"cpuss-0-usr":{nameKey:"temp.quectel.cpu",descriptionKey:"temp.quectel.cpuDesc"},"mdmss-0-usr":{nameKey:"temp.quectel.modem1",descriptionKey:"temp.quectel.modem1Desc"},"mdmss-1-usr":{nameKey:"temp.quectel.modem2",descriptionKey:"temp.quectel.modem2Desc"},"mdmss-2-usr":{nameKey:"temp.quectel.modem3",descriptionKey:"temp.quectel.modem3Desc"},"mdmss-3-usr":{nameKey:"temp.quectel.modem4",descriptionKey:"temp.quectel.modem4Desc"},"mdmq6-0-usr":{nameKey:"temp.quectel.modemQ6",descriptionKey:"temp.quectel.modemQ6Desc"},"modem-ambient-usr":{nameKey:"temp.quectel.ambient",descriptionKey:"temp.quectel.ambientDesc"}};return e.forEach(e=>{let n;let i=/\+QTEMP:\s*"([^"]+)","?(-?\d+)"?/g;for(;null!==(n=i.exec(e));){let e=n[1],i=Number(n[2]);if(i>0){let n=r[e]||{nameKey:"",descriptionKey:""};t.push({name:n.nameKey||e,description:n.descriptionKey||"",nameKey:n.nameKey||void 0,descriptionKey:n.descriptionKey||void 0,value:i});}}}),t;}},netSpeed:{getSigned:()=>['AT+QNWCFG="nr5g_ambr"','AT+QNWCFG="lte_ambr"'],parseSigned:e=>{for(let t of e)for(let e of(0,n.parseResponseByPrefix)(t,'+QNWCFG: "nr5g_ambr",'))if("IMS"!=e[0].toUpperCase())return{apn:e[0],downQci:Number(e[1]),down:Number(e[2]),upQci:Number(e[3]),up:Number(e[4]),type:"5G"};for(let t of e){let e=t.match(/\+QNWCFG: "lte_ambr","([^"]+)",(\d+),(\d+)/);if(e)return{apn:e[1],down:(0,n.convertKbpsToMbps)(Number(e[2])),up:(0,n.convertKbpsToMbps)(Number(e[3])),type:"4G"};}},getRealtime:()=>'AT+QNWCFG="up/down"',parseRealtime:e=>{let t=e.match(/\+QNWCFG: "up\/down",(\d+),(\d+),/);if(t)return{up:Number(t[1]),down:Number(t[2])};},getOperator:()=>["AT+COPS?"],parseOperator:e=>{for(let t of e.join("\n").split(/\r?\n/))if(t.startsWith("+COPS:")){let e=t.split(",");if(e.length>=3){let t=e[2].replace(/"/g,"").trim();return(0,n.getOperatorName)(t);}}}},trafficStat:{getTraffic:()=>["AT+QGDNRCNT?","AT+QGDCNT?"],parseTraffic:e=>{let t=0,r=0,n=e.join("\n").match(/\+QGDNRCNT: (\d+),(\d+)/);n&&(t=n[1]?Number(n[1]):0,r=n[2]?Number(n[2]):0);let i=e.join("\n").match(/\+QGDCNT: (\d+),(\d+)/);return i&&(i[1]&&i[1],i[2]&&i[2]),{up:t+0,down:r+0};},getTime:()=>["AT+QLTS=0","AT+CCLK?"],parseTime:e=>{var t,r;let n="",i="",a=null===(t=e[0])||void 0===t?void 0:t.match(/\+QLTS: "([^"]+)/);a&&(n=a[1]);let o=null===(r=e[1])||void 0===r?void 0:r.match(/\+CCLK: "([^"]+)/);return o&&(i=o[1]),{lastConnectTime:n,nowTime:i};},reset:()=>["AT+QGDNRCNT=0","AT+QGDCNT=0"]},bandQuery:{get:()=>"",parse:e=>[101,103,105,108,134,138,139,140,141,501,503,505,508,5028,5041,5078,5079]},ipAddr:{get:()=>["AT+CGPIAF=1,1,1,1","AT+CGPADDR=1"],parse:e=>{let t;let r=e.match(/\+CGPADDR:\s*\d+,"([^"]*)"(?:,"([^"]*)")?/),i=(null==r?void 0:r[1])||void 0,a=(null==r?void 0:r[2])||void 0;return a&&(t=(0,n.ipv6DotToHex)(a)),{ipv4:i,ipv6:a,ipv6Hex:t};}}},o={...a},s={...a,bandQuery:{get:()=>"",parse:e=>[101,102,103,104,105,107,108,112,113,114,117,118,119,120,125,126,128,129,130,132,134,138,139,140,141,142,143,146,148,166,171,501,502,503,505,507,508,5012,5013,5014,5018,5020,5025,5026,5028,5029,5030,5038,5040,5041,5048,5066,5070,5071,5075,5076,5077,5078,5079]}},l={...a},d={...a,bandQuery:{get:()=>"",parse:e=>[101,102,103,104,105,107,108,112,113,114,117,118,119,120,125,126,128,129,130,132,134,138,139,140,141,142,143,146,148,166,171,501,502,503,505,507,508,5012,5020,5025,5028,5038,5040,5041,5048,5066,5071,5077,5078,5079]}},u={...a,bandQuery:{get:()=>"",parse:e=>[101,102,103,104,105,107,108,112,113,114,117,118,119,120,125,126,128,129,130,132,134,138,139,140,141,142,143,146,148,166,171,501,502,503,505,507,508,5012,5013,5014,5018,5020,5025,5026,5028,5029,5030,5038,5040,5041,5048,5066,5070,5071,5075,5076,5077,5078,5079]}},c={...a,bandQuery:{get:()=>"",parse:e=>[101,102,103,104,105,107,108,112,113,114,117,118,119,120,125,126,128,129,130,132,134,138,139,140,141,142,143,146,148,153,166,171,501,502,503,505,507,508,5012,5013,5014,5018,5020,5025,5026,5028,5029,5030,5038,5040,5041,5048,5053,5066,5070,5071,5075,5076,5077,5078,5079,5091,5092,5093,5094,50257,50258,50260,50261]},temp:{get:()=>["AT+QTEMP"],parse:e=>{let t=[],r={sdr0:{nameKey:"temp.rm551e.sdr0",descriptionKey:"temp.rm551e.sdr0Desc"},mmw0:{nameKey:"temp.rm551e.mmw0",descriptionKey:"temp.rm551e.mmw0Desc"},"aoss-0":{nameKey:"temp.rm551e.aoss",descriptionKey:"temp.rm551e.aossDesc"},"cpuss-0":{nameKey:"temp.rm551e.cpu0",descriptionKey:"temp.rm551e.cpu0Desc"},"cpuss-1":{nameKey:"temp.rm551e.cpu1",descriptionKey:"temp.rm551e.cpu1Desc"},"cpuss-2":{nameKey:"temp.rm551e.cpu2",descriptionKey:"temp.rm551e.cpu2Desc"},"cpuss-3":{nameKey:"temp.rm551e.cpu3",descriptionKey:"temp.rm551e.cpu3Desc"},"ethphy-0":{nameKey:"temp.rm551e.ethphy",descriptionKey:"temp.rm551e.ethphyDesc"},"mvmss-0":{nameKey:"temp.rm551e.mvms",descriptionKey:"temp.rm551e.mvmsDesc"},"mdmq6-0":{nameKey:"temp.rm551e.modemQ6",descriptionKey:"temp.rm551e.modemQ6Desc"},ctile:{nameKey:"temp.rm551e.ctile",descriptionKey:"temp.rm551e.ctileDesc"},"mdmss-0":{nameKey:"temp.rm551e.modem0",descriptionKey:"temp.rm551e.modem0Desc"},"mdmss-1":{nameKey:"temp.rm551e.modem1",descriptionKey:"temp.rm551e.modem1Desc"},"mdmss-2":{nameKey:"temp.rm551e.modem2",descriptionKey:"temp.rm551e.modem2Desc"},"sys-therm-1":{nameKey:"temp.rm551e.sysTherm1",descriptionKey:"temp.rm551e.sysTherm1Desc"},"sys-therm-2":{nameKey:"temp.rm551e.sysTherm2",descriptionKey:"temp.rm551e.sysTherm2Desc"},"sys-therm-3":{nameKey:"temp.rm551e.sysTherm3",descriptionKey:"temp.rm551e.sysTherm3Desc"},"sys-therm-4":{nameKey:"temp.rm551e.sysTherm4",descriptionKey:"temp.rm551e.sysTherm4Desc"}};return e.forEach(e=>{let n;let i=/\+QTEMP:\s*"([^"]+)","?(-?\d+)"?/g;for(;null!==(n=i.exec(e));){let e=n[1],i=Number(n[2]);if(i>0){let n=r[e]||{nameKey:"",descriptionKey:""};t.push({name:n.nameKey||e,description:n.descriptionKey||"",nameKey:n.nameKey||void 0,descriptionKey:n.descriptionKey||void 0,value:i});}}}),t;}}},m={...a,bandQuery:{get:()=>"",parse:e=>[101,102,103,104,105,107,108,112,113,114,117,118,119,120,125,126,128,129,130,132,134,138,139,140,141,142,143,146,148,166,171,501,502,503,505,507,508,5012,5013,5014,5018,5020,5025,5026,5028,5029,5030,5038,5040,5041,5048,5066,5070,5071,5075,5076,5077,5078,5079]},temp:{get:()=>["AT+QTEMP"],parse:e=>{let t=[],r={"aoss-0-usr":{nameKey:"temp.rm520f.aoss",descriptionKey:"temp.rm520f.aossDesc"},"cpuss-0-usr":{nameKey:"temp.rm520f.cpu0",descriptionKey:"temp.rm520f.cpu0Desc"},"mdmq6-0-usr":{nameKey:"temp.rm520f.modemQ6",descriptionKey:"temp.rm520f.modemQ6Desc"},"mdmss-0-usr":{nameKey:"temp.rm520f.modem0",descriptionKey:"temp.rm520f.modem0Desc"},"mdmss-1-usr":{nameKey:"temp.rm520f.modem1",descriptionKey:"temp.rm520f.modem1Desc"},"mdmss-2-usr":{nameKey:"temp.rm520f.modem2",descriptionKey:"temp.rm520f.modem2Desc"},"mdmss-3-usr":{nameKey:"temp.rm520f.modem3",descriptionKey:"temp.rm520f.modem3Desc"},"modem-ambient-usr":{nameKey:"temp.rm520f.ambient",descriptionKey:"temp.rm520f.ambientDesc"},"modem-lte-sub6-pa1":{nameKey:"temp.rm520f.4gPa1",descriptionKey:"temp.rm520f.4gPa1Desc"},"modem-lte-sub6-pa2":{nameKey:"temp.rm520f.4gPa2",descriptionKey:"temp.rm520f.4gPa2Desc"},"modem-sdr0-pa0":{nameKey:"temp.rm520f.sdr0Pa0",descriptionKey:"temp.rm520f.sdr0Pa0Desc"},"modem-sdr0-pa1":{nameKey:"temp.rm520f.sdr0Pa1",descriptionKey:"temp.rm520f.sdr0Pa1Desc"},"modem-sdr0-pa2":{nameKey:"temp.rm520f.sdr0Pa2",descriptionKey:"temp.rm520f.sdr0Pa2Desc"},"modem-sdr1-pa0":{nameKey:"temp.rm520f.sdr1Pa0",descriptionKey:"temp.rm520f.sdr1Pa0Desc"},"modem-sdr1-pa1":{nameKey:"temp.rm520f.sdr1Pa1",descriptionKey:"temp.rm520f.sdr1Pa1Desc"},"modem-sdr1-pa2":{nameKey:"temp.rm520f.sdr1Pa2",descriptionKey:"temp.rm520f.sdr1Pa2Desc"},"modem-mmw0":{nameKey:"temp.rm520f.mmw0",descriptionKey:"temp.rm520f.mmw0Desc"}};return e.forEach(e=>{let n;let i=/\+QTEMP:\s*"([^"]+)","?(-?\d+)"?/g;for(;null!==(n=i.exec(e));){let e=n[1],i=Number(n[2]);if(i>0){let n=r[e]||{nameKey:"",descriptionKey:""};t.push({name:n.nameKey||e,description:n.descriptionKey||"",nameKey:n.nameKey||void 0,descriptionKey:n.descriptionKey||void 0,value:i});}}}),t;}}},p={...a,bandQuery:{get:()=>"",parse:e=>[101,102,103,105,107,108,120,128,132,138,140,141,142,143,501,503,505,507,508,5020,5028,5038,5040,5041,5077,5078]},temp:{get:()=>["AT+QTEMP"],parse:e=>{let t=[],r={qfe_wtr_pa0:{nameKey:"temp.rg501q.wtrPa0",descriptionKey:"temp.rg501q.wtrPa0Desc"},qfe_wtr_pa1:{nameKey:"temp.rg501q.wtrPa1",descriptionKey:"temp.rg501q.wtrPa1Desc"},qfe_wtr_pa2:{nameKey:"temp.rg501q.wtrPa2",descriptionKey:"temp.rg501q.wtrPa2Desc"},qfe_wtr_pa3:{nameKey:"temp.rg501q.wtrPa3",descriptionKey:"temp.rg501q.wtrPa3Desc"},"aoss0-usr":{nameKey:"temp.rg501q.aoss0",descriptionKey:"temp.rg501q.aoss0Desc"},"mdm-q6-usr":{nameKey:"temp.rg501q.modemQ6",descriptionKey:"temp.rg501q.modemQ6Desc"},"mdm-5g-usr":{nameKey:"temp.rg501q.modem5g",descriptionKey:"temp.rg501q.modem5gDesc"},"mdm-vpe-usr":{nameKey:"temp.rg501q.modemVpe",descriptionKey:"temp.rg501q.modemVpeDesc"},"mdm-core-usr":{nameKey:"temp.rg501q.modemCore",descriptionKey:"temp.rg501q.modemCoreDesc"},"cpu0-a7-usr":{nameKey:"temp.rg501q.cpuA7",descriptionKey:"temp.rg501q.cpuA7Desc"},"ipa-usr":{nameKey:"temp.rg501q.ipa",descriptionKey:"temp.rg501q.ipaDesc"},"xo-therm-usr":{nameKey:"temp.rg501q.xo",descriptionKey:"temp.rg501q.xoDesc"},"sdx-case-therm-usr":{nameKey:"temp.rg501q.sdxCase",descriptionKey:"temp.rg501q.sdxCaseDesc"},"ambient-therm-usr":{nameKey:"temp.rg501q.ambient",descriptionKey:"temp.rg501q.ambientDesc"}};return e.forEach(e=>{let n;let i=/\+QTEMP:\s*"([^"]+)","?(-?\d+)"?/g;for(;null!==(n=i.exec(e));){let e=n[1],i=Number(n[2]);if(i>0){let n=r[e]||{nameKey:"",descriptionKey:""};t.push({name:n.nameKey||e,description:n.descriptionKey||"",nameKey:n.nameKey||void 0,descriptionKey:n.descriptionKey||void 0,value:i});}}}),t;}}},f={voltage:{get:()=>"AT+CBC",parse:e=>{let t=e.match(/\+CBC:\s*(\d+),(\d+)/);return t?Number(t[2])/1e3:void 0;}},iccid:{get:()=>"AT+ICCID",parse:e=>{let t=e.match(/\+ICCID:\s*(\d+)/);return t?t[1]:void 0;}},imsi:{get:()=>"AT+CIMI",parse:e=>{for(let t of e.split(/\r?\n/).map(e=>e.trim()).filter(Boolean))if(/^\d{14,15}$/.test(t))return t;}},simNum:{get:()=>"AT+CNUM",parse:e=>{let t=e.match(/\+CNUM:\s*[^,]*,"([^"]+)"/);if(t)return t[1].replace(/^(\+86|86)/,"").replace(/"/g,"")||void 0;}},simSlot:{get:()=>"AT+GTDUALSIM?",set:e=>`AT+GTDUALSIM=${"outer"===e?0:1}`,parse:e=>{let t=e.match(/\+GTDUALSIM\s*:\s*(\d)/);if(t)return"0"===t[1]?"outer":"inner";}},hotSwap:{get:()=>"AT+MSMPD?",set:e=>`AT+MSMPD=${e?1:0}`,parse:e=>{let t=e.match(/\+MSMPD:\s*(\d)/);if(t)return"1"==t[1];}},airplane:{get:()=>"AT+CFUN?",set:e=>`AT+CFUN=${e?0:1}`,parse:e=>{let t=e.match(/\+CFUN:\s*(\d)/);if(t)return"0"===t[1]||"4"===t[1];}},pin:{get:()=>'AT+CLCK="SC",2',enable:e=>`AT+CLCK="SC",1,"${e}"`,disable:e=>`AT+CLCK="SC",0,"${e}"`,parse:e=>{let t=e.match(/\+CLCK:\s*(\d)/);if(t)return"1"===t[1];}},systemInfo:{get:()=>["ATI","AT+GTPKGVER"],parse:e=>{let t={manufacturer:"",model:"",firmware:"",imei:""},r=(e[0]||"").split(/\r?\n/),n={"Manufacturer:":"manufacturer","Model:":"model","Revision:":"firmware","IMEI:":"imei"};r.forEach(e=>{for(let[r,i]of Object.entries(n))if(e.startsWith(r)){t[i]=e.replace(r,"").trim();break;}});let i=(e[1]||"").split(/\r?\n/).find(e=>e.length>20);if(i){let e=i.lastIndexOf("_");if(-1!==e){let r=i.substring(e+1);t.firmware=t.firmware?`${t.firmware}-${r}`:r;}}return t;}},ethDriver:{get:()=>"",set:e=>"",parse:e=>[]},perfMode:{get:()=>"AT+GTTHERMAL?",set:e=>`AT+GTTHERMAL=${e?0:1}`,parse:e=>{let t=e.match(/\+GTTHERMAL: (\d)/);return!!t&&"0"===t[1];}},simpleCmd:{reset:()=>"AT&F",reboot:()=>"AT+CFUN=1,1"},dmz:{get:()=>"",setIpv4:()=>"",setIpv6:()=>"",disableIpv4:()=>"",disableIpv6:()=>"",parse:()=>({})},netSys:{getRatOrder:()=>"AT+GTACT?",setRatOrder:e=>{let t=["NR5G","LTE","WCDMA"],r=e.slice().sort((e,r)=>t.indexOf(e)-t.indexOf(r)).join(",");return`AT+GTACT=${({WCDMA:1,LTE:2,"LTE,WCDMA":4,NR5G:14,"NR5G,WCDMA":16,"NR5G,LTE":17,"NR5G,LTE,WCDMA":20})[r]||1},6,3`;},parseRatOrder:e=>{let t=e.match(/\+GTACT: (\d+)/);return t&&({1:["WCDMA"],2:["LTE"],4:["LTE","WCDMA"],10:["NR5G","LTE","WCDMA"],14:["NR5G"],16:["NR5G","WCDMA"],17:["NR5G","LTE"],20:["NR5G","LTE","WCDMA"]})[Number(t[1])]||[];},getRoamPref:()=>"",setRoamPref:e=>"",parseRoamPref:e=>{let t=e.match(/\+QNWPREFCFG: ?"roam_pref",(\d+)/);return!!t&&"255"===t[1];},getSrvDomain:()=>"AT+CEMODE?",setSrvDomain:e=>`AT+CEMODE=${e}`,parseSrvDomain:e=>{let t=e.match(/\+CEMODE: (\d+)/);return t?parseInt(t[1],10):2;}},imei:{set:e=>`AT+EGMREXT=1,7,"${e}"`},autoDial:{getStatus:()=>"AT+CGACT?",set:e=>e?['AT+CGDCONT=3,"IPV4V6","cbnet"',"AT+CGACT=1,3"]:["AT+CGACT=0,3"],parse:e=>{let t=e.match(/\+CGACT: (\d+),(\d+)/);return!!t&&"1"===t[2];},getApn:()=>"AT+CGDCONT?",setApn:e=>`AT+CGDCONT=3,"IPV4V6","${e}"`,parseApn:e=>{let t=e.split(/\r?\n/),r=[],n=null;for(let e of t){let t=e.match(/\+CGDCONT: \d+,"([^"]+)","([^"]+)"/);if(t){let e=t[1],i=t[2];if(/^ctnet$/i.test(i)||/^cmnet$/i.test(i)||/^cunet$/i.test(i))return{pdpType:e,apn:i};/^cbnet$/i.test(i)&&(n={pdpType:e,apn:i}),r.push({pdpType:e,apn:i});}}return r.length>0?r[0]:n||{pdpType:"",apn:""};}},dialMode:{get:()=>["AT+GTDIPCMODE?"],set:e=>0===e?["AT+GTDIPCMODE=3,1,1,1,3,15"]:["AT+GTDIPCMODE=1,2,2,2,7,13"],parse:e=>{let t=e.match(/\+GTDIPCMODE: ?(\d),(\d),(\d),(\d),(\d),(\d)/);if(t)return"3"===t[1]?0:1;},options:[{label:"dialMode.fibocom.usbPcie",labelKey:"dialMode.fibocom.usbPcie",value:0},{label:"dialMode.fibocom.usbMode",labelKey:"dialMode.fibocom.usbMode",value:1}]},usbMode:{get:()=>"AT+GTUSBMODE?",set:e=>`AT+GTUSBMODE=${e}`,parse:e=>{let t=e.match(/\+GTUSBMODE: (\d+)/);return t?Number(t[1]):void 0;},options:[{label:"usbMode.fibocom.rndis40",labelKey:"usbMode.fibocom.rndis40",value:40},{label:"usbMode.fibocom.rndis41",labelKey:"usbMode.fibocom.rndis41",value:41}]},pdp:{getList:()=>"AT+CGDCONT?",getActive:()=>"AT+CGACT?",set:({cid:e,type:t,apn:r,addr:n,dataComp:i,headComp:a})=>{let o=`AT+CGDCONT=${e},"${t}","${r}"`;return void 0!==n&&""!==n&&(o+=`,"${n}"`),void 0!==i&&(o+=`,${i}`),void 0!==a&&(o+=`,${a}`),o;},delete:e=>`AT+CGDCONT=${e}`,activate:e=>`AT+CGACT=1,${e}`,deactivate:e=>`AT+CGACT=0,${e}`,parseList:e=>{let t=[];return e.split(/\r?\n/).forEach(e=>{let r=e.match(/\+CGDCONT: (\d+),"([^"]+)","([^"]*)","([^"]*)"(?:,(\d+))?(?:,(\d+))?/);r&&t.push({cid:Number(r[1]),type:r[2],apn:r[3],addr:r[4],dataComp:void 0!==r[5]?Number(r[5]):void 0,headComp:void 0!==r[6]?Number(r[6]):void 0});}),t;},parseActive:e=>{let t={};return e.split(/\r?\n/).forEach(e=>{let r=e.match(/\+CGACT: (\d+),(\d)/);r&&(t[Number(r[1])]="1"===r[2]);}),t;}},pdpAuth:{get:(e=1)=>"",set:(e,t,r,n)=>"",parse:e=>{let t=e.match(/\+CGAUTH:\s*(\d+),(\d+),"(.*?)","(.*?)"/);return t?{cid:Number(t[1]),authType:Number(t[2]),username:t[3],password:t[4]}:{cid:1,authType:0,username:"",password:""};}},lockCell:{get:e=>{let t=[];return 0==e.mode?t.push("AT+EMMCHLCK=0"):(t.push("AT+CFUN=0"),"lte"===e.lteOrNr?t.push(`AT+EMMCHLCK=1,7,0,${e.earfcn},${e.pci},3`):t.push(`AT+EMMCHLCK=1,11,0,${e.arfcn},${e.pci},3`),t.push("AT+CFUN=1")),t;},getStatus:()=>["AT+EMMCHLCK?"],parseStatus:e=>{let t;let r=e.match(/\+EMMCHLCK: ([^\r\n]+)/);if(!r)return;let i=r[1].split(",").map(e=>e.trim());if(1===i.length&&"0"===i[0])return{mode:"0"};let a=i[0],o="11"===i[1]?"nr":"7"===i[1]?"lte":i[1],s=i[3],l=i[4];return s&&(t=(0,n.parseLockCellBand)(Number(s)).band),{mode:a,rat:o,freq:s,pci:l,band:t};}},bandSupport:{get:()=>["AT+GTACT?"],set:e=>[`AT+GTACT=20,6,3,${e.sort((e,t)=>e-t).join(",")}`],parse:e=>{let t=e.match(/\+GTACT: ([^\r\n]+)/);if(!t)return[];let r=t[1].split(",").map(e=>Number(e.trim())).filter(e=>!isNaN(e));return r.length<4?[]:r.slice(3);},restore:()=>"AT+GTACT=10,6,3"},neighbourCell:{get:()=>["AT+GTCCINFO?"],parse:e=>{let t=e.split(/\r?\n/).map(e=>e.trim()).filter(e=>e&&!e.startsWith("+GTCCINFO:")&&!e.startsWith("OK")),r=[];for(let e of t){let t=e.split(",").map(e=>e.trim());if("2"!==t[0])continue;let i=t[1];if("9"===i){let e=t[6],i=t[7],a=void 0!==t[8]&&""!==t[8]?Number(t[8]):void 0;void 0!==t[9]&&""!==t[9]&&t[9];let o=void 0!==t[10]&&""!==t[10]?Number(t[10]):void 0,s=void 0!==t[11]&&""!==t[11]?Number(t[11]):void 0,l=void 0!==o&&o<=127?o-157:void 0,d=void 0!==s&&s<=127?s/2-43.5:void 0,u=void 0!==a&&a<=127?a/2-23.5:void 0;r.push({type:"inter",rat:"NR5G",earfcn:e?Number(e):-1,pci:i?Number(i):-1,rsrp:l,rsrq:d,sinr:u,rssi:void 0,band:e?(0,n.getNrBandByArfcn)(Number(e)):void 0});}else if("4"===i){let e=t[6],i=t[7];t[8],void 0!==t[9]&&""!==t[9]&&t[9];let a=void 0!==t[10]&&""!==t[10]?Number(t[10]):void 0,o=void 0!==t[11]&&""!==t[11]?Number(t[11]):void 0,s=void 0!==a&&a<=98?a-141:void 0,l=void 0!==o&&o<=35?o/2-20:void 0;r.push({type:"inter",rat:"LTE",earfcn:e?Number(e):-1,pci:i?Number(i):-1,rsrp:s,rsrq:l,rssi:void 0,band:e?(0,n.getLteBandByEarfcn)(Number(e)):void 0});}}return r;}},qrsrp:{get:()=>"AT+CESQ",parse:e=>{let t=e.match(/\+CESQ: ([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^\r\n]+)/);if(!t)return;let r=Number(t[6]),n=Number(t[8]);return 255!==n&&0!==n?{value:n-157}:255!==r&&0!==r?{value:r-141}:{value:void 0};}},qsinr:{get:()=>"AT+CESQ",parse:e=>{let t=e.match(/\+CESQ: ([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^\r\n]+)/);if(!t)return;let r=Number(t[9]);return{value:255!==r?r/2-23.5:void 0};}},qrsrq:{get:()=>"AT+CESQ",parse:e=>{let t=e.match(/\+CESQ: ([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^\r\n]+)/);if(!t)return;let r=Number(t[6]),n=Number(t[7]);return 255!==n&&0!==n?{value:n/2-43}:255!==r&&0!==r?{value:r/2-20}:{value:void 0};}},csq:{get:()=>"AT+CSQ",parse:e=>{let t=e.match(/\+CSQ: (\d+),/);if(!t)return;let r=Number(t[1]),n="";return n=0===r?-113:1===r?-111:r>=2&&r<=30?-113+2*r:31===r?-51:"\u672A\u77E5",{rssi:r,dBm:n};}},qcainfo:{get:()=>["AT+GTCAINFO?"],parse:e=>{let t=(Array.isArray(e)?e.join("\n"):String(e??"")).split("\n").map(e=>e.trim()).filter(e=>e&&!e.startsWith("OK")&&!e.startsWith("+GTCAINFO:")),r=null,n=[],i={0:"\u914D\u7F6E\u89E3\u9664",1:"\u914D\u7F6E\u672A\u91CA\u653E",2:"\u914D\u7F6E\u5E76\u6FC0\u6D3B"},a={6:"1.4 MHz",15:"3 MHz",25:"5 MHz",50:"10 MHz",75:"15 MHz",100:"20 MHz"},o={25:"5 MHz",50:"10 MHz",75:"15 MHz",100:"20 MHz",125:"25 MHz",150:"30 MHz",200:"40 MHz",250:"50 MHz",300:"60 MHz",400:"80 MHz",450:"90 MHz",500:"100 MHz",1e3:"200 MHz",2e3:"400 MHz"},s={0:"BPSK",1:"QPSK",2:"16QAM",3:"64QAM",4:"256QAM",5:"1024QAM",6:"UNKNOWN"},l={1:"1\u5C42",2:"2\u5C42",3:"3\u5C42",4:"4\u5C42"},d={0:"\u672A\u4F7F\u80FD",1:"\u5DF2\u4F7F\u80FD"};for(let e of t)if(e.startsWith("PCC:")){let t=e.replace("PCC:","").split(",").map(e=>e.trim());r={band:t[0],pci:t[1],earfcn:t[2],dl_bw:a[t[3]]||o[t[3]]||"-",ul_bw:a[t[4]]||o[t[4]]||"-",dl_mimo:l[t[5]]||"-",ul_mimo:l[t[6]]||"-",dl_modulation:s[t[7]]||"-",ul_modulation:s[t[8]]||"-",rsrp:t[9]};}else if(e.startsWith("SCC")){(e.match(/^SCC\s*(\d+):/)||[])[1];let t=e.replace(/^SCC\s*\d+:/,"").split(",").map(e=>e.trim());n.push({scell_state:i[t[1]]||"-",band:t[2],pci:t[3],earfcn:t[4],dl_bw:a[t[5]]||o[t[5]]||"-",ul_bw:a[t[6]]||o[t[6]]||"-",dl_mimo:l[t[7]]||"-",ul_mimo:l[t[8]]||"-",dl_modulation:s[t[9]]||"-",ul_modulation:s[t[10]]||"-",rsrp:t[11]});}else if(e.startsWith("ULconfigured:")){let t=e.replace("ULconfigured:","").trim();(r||(r={})).ul_configured=d[t]||t;}return{pcc:r,scc:n};}},qengServingCell:{get:()=>"AT+GTCCINFO?",parse:e=>{let t=e.split("\n").map(e=>e.trim()).filter(e=>e&&!e.startsWith("OK")&&!e.startsWith("+GTCCINFO:")&&!e.startsWith("<<EOF")),r={};for(let e of t){let t=e.split(",").map(e=>e.trim());"1"===t[0]&&(14===t.length&&"9"===t[1]&&(r={isServiceCell:t[0],rat:t[1],mcc:t[2],mnc:(0,n.formatMNC)(t[3]),tac:t[4],lac:t[4],cellId:t[5],earfcn:t[6],pci:t[7],band:t[8],bandwidth:t[9],sinr:t[10],rxlev:t[11],rsrp:t[12],rsrq:t[13]}),14===t.length&&"4"===t[1]&&(r={isServiceCell:t[0],rat:t[1],mcc:t[2],mnc:(0,n.formatMNC)(t[3]),tac:t[4],lac:t[4],cellId:t[5],earfcn:t[6],pci:t[7],band:t[8],bandwidth:t[9],sinr:t[10],rxlev:t[11],rsrp:t[12],rsrq:t[13]}));}return console.log(r),r;}},networkType:{get:()=>"AT+COPS?",parse:e=>{let t=e.match(/\+COPS:[^\n]+/);if(t){let e=t[0].match(/,(\d+)\s*$/);if(e){let t=Number(e[1]);if(11===t)return"NR5G";if(7===t)return"LTE";if(2===t)return"WCDMA";}}}},regStatus:{get:()=>["AT+C5GREG?","AT+CEREG?","AT+CREG?","AT+CGREG?"],parse:e=>{let t=e.match(/\+C5GREG: (\d),(\d)/);if(t)return Number(t[2]);let r=e.match(/\+CEREG: (\d),(\d)/);if(r)return Number(r[2]);let n=e.match(/\+CREG: (\d),(\d)/);if(n)return Number(n[2]);let i=e.match(/\+CGREG: (\d),(\d)/);if(i)return Number(i[2]);}},sms:{getListCmd:()=>["AT+CMGF=0",'AT+CSCS="GSM"','AT+CPMS="SM","SM","SM"',"AT+CMGL=4",'AT+CPMS="ME","ME","ME"',"AT+CMGL=4"],parseList:e=>{let t=[],r=e.split(/\r?\n/).map(e=>e.trim()),i={};for(let e=0;e<r.length;e++){let n=r[e].match(/\+CMGL: (\d+), (\d+),, (\d+)/);n?(void 0!==i.index&&i.pdu&&t.push(i),i={index:Number(n[1]),status:n[2],pdu:"",phone:"",time:"",content:""}):!i||!r[e]||r[e].startsWith("+")||r[e].startsWith("OK")||r[e].startsWith("AT")||(i.pdu=r[e]);}void 0!==i.index&&i.pdu&&t.push(i);let a=t.map(e=>{let t=(0,n.decodeSmsDeliverPdu)(e.pdu||"");return{...e,phone:t.phone,time:t.time,content:t.content};});return(0,n.mergeConcatSmsList)(a);},getDeleteCmd:e=>Array.isArray(e)?e.map(e=>`AT+CMGD=${e}`):[`AT+CMGD=${e}`]},smsCenter:{get:()=>"AT+CSCA?",set:e=>{let t=/^\+?86/.test(e),r=e.startsWith("+")?e:t?"+"+e:e;return`AT+CSCA="${r}",${t?145:161}`;},parse:e=>{let t=e.match(/\+CSCA: "([^"]+)",\s*\d+/);return t?t[1]:void 0;}},sendSms:{get:(e,t,r)=>{let n=e=>e?e.startsWith("86")?e:e.startsWith("+86")?e.slice(1):"86"+e.replace(/^\+/,""):"",i=n(e),a=n(t);return`SEND_SMS,${i},${a},"${r}"`;},parse:e=>/OK/.test(e)},smsEnable:{get:()=>"AT+CSMS?",set:e=>`AT+CSMS=${e?1:0}`,parse:e=>{let t=e.match(/\+CSMS: (\d)/);if(t)return"1"===t[1];}},smsStore:{get:()=>['AT+CPMS="MT","MT","MT"',"AT+CPMS?"],set:e=>`AT+CPMS="${e}","${e}","${e}"`,parse:e=>{let t=e.match(/\+CPMS:.*?("SM"|"ME"),\s*(\d+),\s*(\d+),\s*("SM"|"ME"),\s*(\d+),\s*(\d+),\s*("SM"|"ME"),\s*(\d+),\s*(\d+)/);if(t)return{read:{used:Number(t[2]),total:Number(t[3])},write:{used:Number(t[5]),total:Number(t[6])},status:{used:Number(t[8]),total:Number(t[9])},rawArr:t};let r=e.match(/\d+/g);return r&&r.length>=6?{read:{used:Number(r[0]),total:Number(r[1])},write:{used:Number(r[2]),total:Number(r[3])},status:{used:Number(r[4]),total:Number(r[5])},rawArr:r}:{read:{used:0,total:0},write:{used:0,total:0},status:{used:0,total:0},rawArr:[]};}},temp:{get:()=>["AT+GTSENRDTEMP=0"],parse:e=>{let t={1:{nameKey:"temp.fibocom.socMax",descriptionKey:"temp.fibocom.socMaxDesc"},2:{nameKey:"temp.fibocom.cpu0",descriptionKey:"temp.fibocom.cpu0Desc"},3:{nameKey:"temp.fibocom.cpu1",descriptionKey:"temp.fibocom.cpu1Desc"},4:{nameKey:"temp.fibocom.cpu2",descriptionKey:"temp.fibocom.cpu2Desc"},5:{nameKey:"temp.fibocom.cpu3",descriptionKey:"temp.fibocom.cpu3Desc"},6:{nameKey:"temp.fibocom.gpu0",descriptionKey:"temp.fibocom.gpu0Desc"},7:{nameKey:"temp.fibocom.gpu1",descriptionKey:"temp.fibocom.gpu1Desc"},8:{nameKey:"temp.fibocom.memoryController",descriptionKey:"temp.fibocom.memoryControllerDesc"},9:{nameKey:"temp.fibocom.multimedia",descriptionKey:"temp.fibocom.multimediaDesc"},10:{nameKey:"temp.fibocom.baseband5g",descriptionKey:"temp.fibocom.baseband5gDesc"},11:{nameKey:"temp.fibocom.baseband4g",descriptionKey:"temp.fibocom.baseband4gDesc"},12:{nameKey:"temp.fibocom.baseband3g",descriptionKey:"temp.fibocom.baseband3gDesc"},13:{nameKey:"temp.fibocom.socDramNtc",descriptionKey:"temp.fibocom.socDramNtcDesc"},14:{nameKey:"temp.fibocom.ltePa",descriptionKey:"temp.fibocom.ltePaDesc"},15:{nameKey:"temp.fibocom.nrPa",descriptionKey:"temp.fibocom.nrPaDesc"},16:{nameKey:"temp.fibocom.rfNtc",descriptionKey:"temp.fibocom.rfNtcDesc"},17:{nameKey:"temp.fibocom.basebandRf",descriptionKey:"temp.fibocom.basebandRfDesc"},18:{nameKey:"temp.fibocom.gps",descriptionKey:"temp.fibocom.gpsDesc"},19:{nameKey:"temp.fibocom.pmic",descriptionKey:"temp.fibocom.pmicDesc"},20:{nameKey:"temp.fibocom.pmicCore",descriptionKey:"temp.fibocom.pmicCoreDesc"},21:{nameKey:"temp.fibocom.pmicProcessor",descriptionKey:"temp.fibocom.pmicProcessorDesc"},22:{nameKey:"temp.fibocom.pmicGpu",descriptionKey:"temp.fibocom.pmicGpuDesc"},23:{nameKey:"temp.fibocom.crystal",descriptionKey:"temp.fibocom.crystalDesc"}},r=[];return e.forEach(e=>{let n;let i=/\+GTSENRDTEMP: (\d+),(\-?\d+)/g;for(;null!==(n=i.exec(e));){let e=n[1],i=Number(n[2])/1e3,a=t[e]||{nameKey:"",descriptionKey:""};r.push({name:a.nameKey||`Sensor${e}`,description:a.descriptionKey||"",nameKey:a.nameKey||void 0,descriptionKey:a.descriptionKey||void 0,value:i});}}),r;}},netSpeed:{getSigned:()=>["AT+CGDCONT?","AT+C5GQOSRDP=3","AT+CGEQOSRDP=3"],parseSigned:e=>{let t,r="",i=[];for(let t of e){let e=t.split(/\r?\n/);if(r)break;for(let t of e)if(t.startsWith("+CGDCONT:")){let e=t.split(",")[2].replace(/"/g,"");i.push(e);}}if(i.length>0){let e="";for(let t of i){if(/^ctnet$/i.test(t)||/^cmnet$/i.test(t)||/^cunet$/i.test(t)){r=t;break;}/^cbnet$/i.test(t)&&(e=t);}!r&&e?r=e:r||(r=i[0]);}for(let i of e)for(let e of i.split(/\r?\n/))if(e.startsWith("+C5GQOSRDP:")){let i=e.split(",");i.length>=8&&(t={apn:r,downQci:Number(i[1]),upQci:Number(i[1]),down:(0,n.convertKbpsToMbps)(Number(i[6])),up:(0,n.convertKbpsToMbps)(Number(i[7])),type:"5G"});}if(t)return t;for(let i of e)for(let e of i.split(/\r?\n/))if(e.startsWith("+CGEQOSRDP:")){let i=e.split(",");i.length>=8&&(t={apn:r,downQci:Number(i[1]),upQci:Number(i[1]),down:(0,n.convertKbpsToMbps)(Number(i[6])),up:(0,n.convertKbpsToMbps)(Number(i[7])),type:"4G"});}return t;},getRealtime:()=>"CMD(I=$(grep -A10 \"^config modem-device\" /etc/config/qmodem | grep -B10 \"'fm350-gl'\" | grep data_interface | head -1 | awk '{print $3}' | tr -d \"'\" | tr 'a-z' 'A-Z');D=$(uci get network.$I.device 2>/dev/null);R1=$(cat /proc/net/dev | grep \"$D:\" | awk '{print $2}');T1=$(cat /proc/net/dev | grep \"$D:\" | awk '{print $10}');sleep 1;R2=$(cat /proc/net/dev | grep \"$D:\" | awk '{print $2}');T2=$(cat /proc/net/dev | grep \"$D:\" | awk '{print $10}');U=$(( (T2-T1)*8 ));B=$(( (R2-R1)*8 ));echo \"+QNWCFG: up/down,$U,$B\")",parseRealtime:e=>{let t=e.match(/\+QNWCFG: up\/down,(\d+),(\d+)/);if(t)return{up:Number(t[1]),down:Number(t[2])};},getOperator:()=>["AT+COPS?"],parseOperator:e=>{for(let t of e.join("\n").split(/\r?\n/))if(t.startsWith("+COPS:")){let e=t.split(",");if(e.length>=3){let t=e[2].replace(/"/g,"").trim();return(0,n.getOperatorName)(t);}}}},trafficStat:{getTraffic:()=>['CMD(IFM=$(grep -A10 "^config modem-device" /etc/config/qmodem | grep -B10 "\'fm350-gl\'" | grep data_interface | head -1 | awk \'{print $3}\' | tr -d "\'" | tr \'a-z\' \'A-Z\');DEV=$(uci get network.${IFM}.device 2>/dev/null); cat /proc/net/dev | grep "$DEV" | awk \'{print"+QGDCNT: "$10","$2}\')'],parseTraffic:e=>{let t=e.join("\n").match(/\+QGDCNT: (\d+),(\d+)/);return t?{up:Number(t[1]),down:Number(t[2])}:{up:0,down:0};},getTime:()=>["AT+CCLK?"],parseTime:e=>{var t;let r="",n=null===(t=e[0])||void 0===t?void 0:t.match(/\+CCLK: "([^"]+)/);return n&&(r=n[1]),{lastConnectTime:r,nowTime:r};},reset:()=>[""]},bandQuery:{get:()=>"AT+GTACT=?",parse:e=>{let t=e.match(/\(([^)]*)\)/g);if(!t||t.length<7)return[];let r=t[5].replace(/[()]/g,""),n=t[8].replace(/[()]/g,"");return[...r?r.split(",").map(e=>Number(e.trim())).filter(Boolean):[],...n?n.split(",").map(e=>Number(e.trim())).filter(Boolean):[]];}},ipAddr:{get:()=>["AT+CGPIAF=1,1,1,1","AT+CGPADDR=3"],parse:e=>{let t;let r=e.match(/\+CGPADDR:\s*\d+,"([^"]*)"(?:,"([^"]*)")?/),i=(null==r?void 0:r[1])||void 0,a=(null==r?void 0:r[2])||void 0;return a&&(t=(0,n.ipv6DotToHex)(a)),{ipv4:i,ipv6:a,ipv6Hex:t};}}},v={...f},g={"FM350-GL":"FM350_AT","RW350R-GL":"FM350_AT",FM160:"Fibocom_AT","RM520N-CN":"RM520NCN_AT","RM520N-GL":"RM520NGL_AT","RM500Q-CN":"RM500QCN_AT","RM500Q-GL":"RM500QGL_AT","RM502Q-AE":"RM502QAE_AT","RM520F-GL":"RM520FGL_AT","RM551E-GL":"RM551EGL_AT","RG501Q-EU":"RG501QEU_AT"},b={EMPTY_AT:{voltage:{get:()=>"",parse:e=>""},iccid:{get:()=>"",parse:e=>""},imsi:{get:()=>"",parse:e=>""},simNum:{get:()=>"",parse:e=>""},simSlot:{get:()=>"",set:e=>"",parse:e=>""},hotSwap:{get:()=>"",set:e=>"",parse:e=>""},airplane:{get:()=>"",set:e=>"",parse:e=>""},pin:{get:()=>"",enable:e=>"",disable:e=>"",parse:e=>""},systemInfo:{get:()=>[""],parse:e=>[""]},ethDriver:{get:()=>"",set:e=>"",parse:e=>""},perfMode:{get:()=>"",set:e=>"",parse:e=>""},simpleCmd:{reset:()=>"",reboot:()=>""},dmz:{get:()=>"",setIpv4:()=>"",setIpv6:()=>"",disableIpv4:()=>"",disableIpv6:()=>"",parse:()=>""},netSys:{getRatOrder:()=>"",setRatOrder:e=>[],parseRatOrder:e=>[],getRoamPref:()=>"",setRoamPref:e=>"",parseRoamPref:e=>!1,getSrvDomain:()=>"",setSrvDomain:e=>"",parseSrvDomain:e=>""},imei:{set:e=>""},autoDial:{getStatus:()=>"",set:e=>["",""],parse:e=>"",getApn:()=>"",setApn:e=>"",parseApn:e=>""},dialMode:{get:()=>[""],set:e=>["",""],parse:e=>"",options:[{label:"PCIE\u6A21\u5F0F",value:0},{label:"USB\u6A21\u5F0F",value:1}]},usbMode:{get:()=>"",set:e=>"",parse:e=>"",options:[{label:"\u62E8\u53F7\u6A21\u5F0F-1",value:40},{label:"\u62E8\u53F7\u6A21\u5F0F-2",value:41}]},pdp:{getList:()=>"",getActive:()=>"",set:({cid:e,type:t,apn:r,addr:n,dataComp:i,headComp:a})=>"",delete:e=>"",activate:e=>"",deactivate:e=>"",parseList:e=>"",parseActive:e=>""},pdpAuth:{get:(e=1)=>"",set:(e,t,r,n)=>"",parse:e=>""},lockCell:{get:e=>[""],getStatus:()=>[""],parseStatus:e=>""},bandSupport:{get:()=>[""],set:e=>["",""],parse:e=>[0,0],restore:()=>""},neighbourCell:{get:()=>[""],parse:e=>[]},qrsrp:{get:()=>"",parse:e=>""},qsinr:{get:()=>"",parse:e=>""},qrsrq:{get:()=>"",parse:e=>""},csq:{get:()=>"",parse:e=>""},qcainfo:{get:()=>[""],parse:e=>""},qengServingCell:{get:()=>"",parse:e=>""},networkType:{get:()=>"",parse:e=>""},regStatus:{get:()=>[""],parse:e=>""},sms:{getListCmd:()=>[""],parseList:e=>""},smsCenter:{get:()=>"",set:e=>"",parse:e=>""},sendSms:{get:(e,t,r)=>"",parse:e=>/OK/.test(e)},smsEnable:{get:()=>"",set:e=>"",parse:e=>""},smsStore:{get:()=>[""],set:e=>"",parse:e=>""},temp:{get:()=>[""],parse:e=>[]},netSpeed:{getSigned:()=>[""],parseSigned:e=>["",""],getRealtime:()=>"",parseRealtime:e=>["",""],getOperator:()=>[""],parseOperator:e=>["",""]},trafficStat:{getTraffic:()=>[""],parseTraffic:e=>["",""],getTime:()=>[""],parseTime:e=>["",""],reset:()=>[""]},bandQuery:{get:()=>"",parse:e=>""},ipAddr:{get:()=>[""],parse:e=>""}},Quectel_AT:a,Fibocom_AT:f,RM520NCN_AT:o,RM520NGL_AT:s,RM500QCN_AT:l,RM500QGL_AT:d,RM502QAE_AT:u,RM520FGL_AT:m,RM551EGL_AT:c,RG501QEU_AT:p,FM350_AT:v};function h(e,t){try{return localStorage.getItem("modem_cmd_group_"+e+"_"+t);}catch{return null;}}function y(e,t,r){try{localStorage.setItem("modem_cmd_group_"+e+"_"+t,r);}catch{}}let C=e=>{let t={manufacturer:"",model:"",firmware:"",imei:""},r=e.split(/\r?\n/).map(e=>e.trim()).filter(Boolean),n="";for(let e=0;e<r.length;e++)if(r[e].startsWith("Model:")){n=r[e].replace("Model:","").trim();break;}if(!n){let e=r.findIndex(e=>e.toLowerCase().includes("quectel"));-1!==e&&r[e+1]&&(n=r[e+1].trim());}for(let e=0;e<r.length;e++)r[e].startsWith("Manufacturer:")&&(t.manufacturer=r[e].replace("Manufacturer:","").trim()),r[e].startsWith("Revision:")&&(t.firmware=r[e].replace("Revision:","").trim()),r[e].startsWith("IMEI:")&&(t.imei=r[e].replace("IMEI:","").trim());if(!t.manufacturer){let e=r.findIndex(e=>e.toLowerCase().includes("quectel"));-1!==e&&(t.manufacturer=r[e]);}t.model=n;let i=g[t.model]||"EMPTY_AT";return t.detectedGroup=i,t;};function S(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.voltage)||void 0===t?void 0:t.get)||b.Quectel_AT.voltage.get)();}function T(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.voltage)||void 0===r?void 0:r.parse)||b.Quectel_AT.voltage.parse)(e);}function A(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.iccid)||void 0===t?void 0:t.get)||b.Quectel_AT.iccid.get)();}function x(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.iccid)||void 0===r?void 0:r.parse)||b.Quectel_AT.iccid.parse)(e);}function M(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.imsi)||void 0===t?void 0:t.get)||b.Quectel_AT.imsi.get)();}function N(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.imsi)||void 0===r?void 0:r.parse)||b.Quectel_AT.imsi.parse)(e);}function w(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.simNum)||void 0===t?void 0:t.get)||b.Quectel_AT.simNum.get)();}function Q(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.simNum)||void 0===r?void 0:r.parse)||b.Quectel_AT.simNum.parse)(e);}function R(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.simSlot)||void 0===t?void 0:t.get)||b.Quectel_AT.simSlot.get)();}function _(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.simSlot)||void 0===r?void 0:r.set)||b.Quectel_AT.simSlot.set)(t);}function D(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.simSlot)||void 0===r?void 0:r.parse)||b.Quectel_AT.simSlot.parse)(e);}function K(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.hotSwap)||void 0===t?void 0:t.get)||b.Quectel_AT.hotSwap.get)();}function k(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.hotSwap)||void 0===r?void 0:r.set)||b.Quectel_AT.hotSwap.set)(t);}function G(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.hotSwap)||void 0===r?void 0:r.parse)||b.Quectel_AT.hotSwap.parse)(e);}function j(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.airplane)||void 0===t?void 0:t.get)||b.Quectel_AT.airplane.get)();}function E(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.airplane)||void 0===r?void 0:r.set)||b.Quectel_AT.airplane.set)(t);}function I(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.airplane)||void 0===r?void 0:r.parse)||b.Quectel_AT.airplane.parse)(e);}function z(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.pin)||void 0===t?void 0:t.get)||b.Quectel_AT.pin.get)();}function P(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.pin)||void 0===r?void 0:r.enable)||b.Quectel_AT.pin.enable)(t);}function q(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.pin)||void 0===r?void 0:r.disable)||b.Quectel_AT.pin.disable)(t);}function L(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.pin)||void 0===r?void 0:r.parse)||b.Quectel_AT.pin.parse)(e);}function O(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.systemInfo)||void 0===t?void 0:t.get)||b.Quectel_AT.systemInfo.get)();}function $(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.systemInfo)||void 0===r?void 0:r.parse)||b.Quectel_AT.systemInfo.parse)(e);}function W(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.ethDriver)||void 0===t?void 0:t.get)||b.Quectel_AT.ethDriver.get)();}function F(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.ethDriver)||void 0===r?void 0:r.set)||b.Quectel_AT.ethDriver.set)(t);}function H(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.ethDriver)||void 0===r?void 0:r.parse)||b.Quectel_AT.ethDriver.parse)(e);}function B(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.perfMode)||void 0===t?void 0:t.get)||b.Quectel_AT.perfMode.get)();}function U(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.perfMode)||void 0===r?void 0:r.set)||b.Quectel_AT.perfMode.set)(t);}function V(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.perfMode)||void 0===r?void 0:r.parse)||b.Quectel_AT.perfMode.parse)(e);}function Z(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.simpleCmd)||void 0===t?void 0:t.reset)||b.Quectel_AT.simpleCmd.reset)();}function Y(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.simpleCmd)||void 0===t?void 0:t.reboot)||b.Quectel_AT.simpleCmd.reboot)();}function X(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.dmz)||void 0===t?void 0:t.get)||b.Quectel_AT.dmz.get)();}function J(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.dmz)||void 0===r?void 0:r.setIpv4)||b.Quectel_AT.dmz.setIpv4)(t);}function ee(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.dmz)||void 0===r?void 0:r.setIpv6)||b.Quectel_AT.dmz.setIpv6)(t);}function et(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.dmz)||void 0===t?void 0:t.disableIpv4)||b.Quectel_AT.dmz.disableIpv4)();}function er(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.dmz)||void 0===t?void 0:t.disableIpv6)||b.Quectel_AT.dmz.disableIpv6)();}function en(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.dmz)||void 0===r?void 0:r.parse)||b.Quectel_AT.dmz.parse)(e);}function ei(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.netSys)||void 0===t?void 0:t.getRatOrder)||b.Quectel_AT.netSys.getRatOrder)();}function ea(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.netSys)||void 0===r?void 0:r.setRatOrder)||b.Quectel_AT.netSys.setRatOrder)(t);}function eo(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.netSys)||void 0===r?void 0:r.parseRatOrder)||b.Quectel_AT.netSys.parseRatOrder)(e);}function es(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.netSys)||void 0===t?void 0:t.getRoamPref)||b.Quectel_AT.netSys.getRoamPref)();}function el(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.netSys)||void 0===r?void 0:r.setRoamPref)||b.Quectel_AT.netSys.setRoamPref)(t);}function ed(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.netSys)||void 0===r?void 0:r.parseRoamPref)||b.Quectel_AT.netSys.parseRoamPref)(e);}function eu(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.netSys)||void 0===t?void 0:t.getSrvDomain)||b.Quectel_AT.netSys.getSrvDomain)();}function ec(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.netSys)||void 0===r?void 0:r.setSrvDomain)||b.Quectel_AT.netSys.setSrvDomain)(t);}function em(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.netSys)||void 0===r?void 0:r.parseSrvDomain)||b.Quectel_AT.netSys.parseSrvDomain)(e);}function ep(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.imei)||void 0===r?void 0:r.set)||b.Quectel_AT.imei.set)(t);}function ef(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.autoDial)||void 0===t?void 0:t.getStatus)||b.Quectel_AT.autoDial.getStatus)();}function ev(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.autoDial)||void 0===r?void 0:r.set)||b.Quectel_AT.autoDial.set)(t);}function eg(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.autoDial)||void 0===r?void 0:r.parse)||b.Quectel_AT.autoDial.parse)(e);}function eb(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.autoDial)||void 0===t?void 0:t.getApn)||b.Quectel_AT.autoDial.getApn)();}function eh(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.autoDial)||void 0===r?void 0:r.setApn)||b.Quectel_AT.autoDial.setApn)(t);}function ey(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.autoDial)||void 0===r?void 0:r.parseApn)||b.Quectel_AT.autoDial.parseApn)(e);}function eC(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.dialMode)||void 0===t?void 0:t.get)||b.Quectel_AT.dialMode.get)();}function eS(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.dialMode)||void 0===r?void 0:r.set)||b.Quectel_AT.dialMode.set)(t);}function eT(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.dialMode)||void 0===r?void 0:r.parse)||b.Quectel_AT.dialMode.parse)(e);}function eA(e){var t,r;return(null===(r=b[e])||void 0===r?void 0:null===(t=r.dialMode)||void 0===t?void 0:t.options)||b.Quectel_AT.dialMode.options;}function ex(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.usbMode)||void 0===t?void 0:t.get)||b.Quectel_AT.usbMode.get)();}function eM(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.usbMode)||void 0===r?void 0:r.set)||b.Quectel_AT.usbMode.set)(t);}function eN(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.usbMode)||void 0===r?void 0:r.parse)||b.Quectel_AT.usbMode.parse)(e);}function ew(e){var t,r;return(null===(r=b[e])||void 0===r?void 0:null===(t=r.usbMode)||void 0===t?void 0:t.options)||b.Quectel_AT.usbMode.options;}function eQ(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.pdp)||void 0===t?void 0:t.getList)||b.Quectel_AT.pdp.getList)();}function eR(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.pdp)||void 0===t?void 0:t.getActive)||b.Quectel_AT.pdp.getActive)();}function e_(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.pdp)||void 0===r?void 0:r.set)||b.Quectel_AT.pdp.set)(t);}function eD(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.pdp)||void 0===r?void 0:r.delete)||b.Quectel_AT.pdp.delete)(t);}function eK(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.pdp)||void 0===r?void 0:r.activate)||b.Quectel_AT.pdp.activate)(t);}function ek(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.pdp)||void 0===r?void 0:r.deactivate)||b.Quectel_AT.pdp.deactivate)(t);}function eG(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.pdp)||void 0===r?void 0:r.parseList)||b.Quectel_AT.pdp.parseList)(e);}function ej(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.pdp)||void 0===r?void 0:r.parseActive)||b.Quectel_AT.pdp.parseActive)(e);}function eE(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.bandSupport)||void 0===t?void 0:t.get)||b.Quectel_AT.bandSupport.get)();}function eI(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.bandSupport)||void 0===r?void 0:r.set)||b.Quectel_AT.bandSupport.set)(t);}function ez(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.bandSupport)||void 0===r?void 0:r.parse)||b.Quectel_AT.bandSupport.parse)(e);}function eP(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.bandSupport)||void 0===t?void 0:t.restore)||b.Quectel_AT.bandSupport.restore)();}function eq(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.neighbourCell)||void 0===t?void 0:t.get)||b.Quectel_AT.neighbourCell.get)();}function eL(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.neighbourCell)||void 0===r?void 0:r.parse)||b.Quectel_AT.neighbourCell.parse)(e);}function eO(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.qrsrp)||void 0===t?void 0:t.get)||b.Quectel_AT.qrsrp.get)();}function e$(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.qrsrp)||void 0===r?void 0:r.parse)||b.Quectel_AT.qrsrp.parse)(e);}function eW(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.qsinr)||void 0===t?void 0:t.get)||b.Quectel_AT.qsinr.get)();}function eF(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.qsinr)||void 0===r?void 0:r.parse)||b.Quectel_AT.qsinr.parse)(e);}function eH(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.qrsrq)||void 0===t?void 0:t.get)||b.Quectel_AT.qrsrq.get)();}function eB(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.qrsrq)||void 0===r?void 0:r.parse)||b.Quectel_AT.qrsrq.parse)(e);}function eU(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.csq)||void 0===t?void 0:t.get)||b.Quectel_AT.csq.get)();}function eV(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.csq)||void 0===r?void 0:r.parse)||b.Quectel_AT.csq.parse)(e);}function eZ(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.qcainfo)||void 0===t?void 0:t.get)||b.Quectel_AT.qcainfo.get)();}function eY(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.qcainfo)||void 0===r?void 0:r.parse)||b.Quectel_AT.qcainfo.parse)(e);}function eX(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.qengServingCell)||void 0===t?void 0:t.get)||b.Quectel_AT.qengServingCell.get)();}function eJ(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.qengServingCell)||void 0===r?void 0:r.parse)||b.Quectel_AT.qengServingCell.parse)(e);}function e0(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.networkType)||void 0===t?void 0:t.get)||b.Quectel_AT.networkType.get)();}function e1(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.networkType)||void 0===r?void 0:r.parse)||b.Quectel_AT.networkType.parse)(e);}function e5(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.regStatus)||void 0===t?void 0:t.get)||b.Quectel_AT.regStatus.get)();}function e2(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.regStatus)||void 0===r?void 0:r.parse)||b.Quectel_AT.regStatus.parse)(e);}function e4(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.sms)||void 0===t?void 0:t.getListCmd)||b.Quectel_AT.sms.getListCmd)();}function e6(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.sms)||void 0===r?void 0:r.parseList)||b.Quectel_AT.sms.parseList)(e);}function e3(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.sms)||void 0===r?void 0:r.getDeleteCmd)||b.Quectel_AT.sms.getDeleteCmd)(t);}function e8(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.smsCenter)||void 0===t?void 0:t.get)||b.Quectel_AT.smsCenter.get)();}function e7(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.smsCenter)||void 0===r?void 0:r.set)||b.Quectel_AT.smsCenter.set)(t);}function e9(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.smsCenter)||void 0===r?void 0:r.parse)||b.Quectel_AT.smsCenter.parse)(e);}function te(e,t,r,n){var i,a;return((null===(a=b[e])||void 0===a?void 0:null===(i=a.sendSms)||void 0===i?void 0:i.get)||b.Quectel_AT.sendSms.get)(t,r,n);}function tt(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.sendSms)||void 0===r?void 0:r.parse)||b.Quectel_AT.sendSms.parse)(e);}function tr(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.smsEnable)||void 0===t?void 0:t.get)||b.Quectel_AT.smsEnable.get)();}function tn(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.smsEnable)||void 0===r?void 0:r.set)||b.Quectel_AT.smsEnable.set)(t);}function ti(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.smsEnable)||void 0===r?void 0:r.parse)||b.Quectel_AT.smsEnable.parse)(e);}function ta(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.smsStore)||void 0===t?void 0:t.get)||b.Quectel_AT.smsStore.get)();}function to(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.smsStore)||void 0===r?void 0:r.set)||b.Quectel_AT.smsStore.set)(t);}function ts(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.smsStore)||void 0===r?void 0:r.parse)||b.Quectel_AT.smsStore.parse)(e);}function tl(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.netSpeed)||void 0===t?void 0:t.getSigned)||b.Quectel_AT.netSpeed.getSigned)();}function td(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.netSpeed)||void 0===r?void 0:r.parseSigned)||b.Quectel_AT.netSpeed.parseSigned)(e);}function tu(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.netSpeed)||void 0===t?void 0:t.getRealtime)||b.Quectel_AT.netSpeed.getRealtime)();}function tc(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.netSpeed)||void 0===r?void 0:r.parseRealtime)||b.Quectel_AT.netSpeed.parseRealtime)(e);}function tm(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.netSpeed)||void 0===t?void 0:t.getOperator)||b.Quectel_AT.netSpeed.getOperator)();}function tp(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.netSpeed)||void 0===r?void 0:r.parseOperator)||b.Quectel_AT.netSpeed.parseOperator)(e);}function tf(e){var t,r,n,i;return[...((null===(r=b[e])||void 0===r?void 0:null===(t=r.trafficStat)||void 0===t?void 0:t.getTraffic)||b.Quectel_AT.trafficStat.getTraffic)(),...((null===(i=b[e])||void 0===i?void 0:null===(n=i.trafficStat)||void 0===n?void 0:n.getTime)||b.Quectel_AT.trafficStat.getTime)()];}function tv(e,t,r=!1){var n,i,a,o;let s=((null===(i=b[t])||void 0===i?void 0:null===(n=i.trafficStat)||void 0===n?void 0:n.parseTraffic)||b.Quectel_AT.trafficStat.parseTraffic)(e),l=((null===(o=b[t])||void 0===o?void 0:null===(a=o.trafficStat)||void 0===a?void 0:a.parseTime)||b.Quectel_AT.trafficStat.parseTime)(e.slice(1));return r&&s?{up:s.down,down:s.up,...l}:{...s,...l};}function tg(e){var t,r,n;return(null===(t=(null===(n=b[e])||void 0===n?void 0:null===(r=n.trafficStat)||void 0===r?void 0:r.reset)||b.Quectel_AT.trafficStat.reset)||void 0===t?void 0:t())||[];}function tb(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.temp)||void 0===t?void 0:t.get)||b.Quectel_AT.temp.get)();}function th(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.temp)||void 0===r?void 0:r.parse)||b.Quectel_AT.temp.parse)(e);}function ty(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.bandQuery)||void 0===t?void 0:t.get)||b.Quectel_AT.bandQuery.get)();}function tC(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.bandQuery)||void 0===r?void 0:r.parse)||b.Quectel_AT.bandQuery.parse)(e);}function tS(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.ipAddr)||void 0===t?void 0:t.get)||b.Quectel_AT.ipAddr.get)();}function tT(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.ipAddr)||void 0===r?void 0:r.parse)||b.Quectel_AT.ipAddr.parse)(e);}function tA(e,t){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.lockCell)||void 0===r?void 0:r.get)||b.Quectel_AT.lockCell.get)(t);}function tx(e){var t,r;return((null===(r=b[e])||void 0===r?void 0:null===(t=r.lockCell)||void 0===t?void 0:t.getStatus)||b.Quectel_AT.lockCell.getStatus)();}function tM(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.lockCell)||void 0===r?void 0:r.parseStatus)||b.Quectel_AT.lockCell.parseStatus)(e);}function tN(e,t=1){var r,n;return((null===(n=b[e])||void 0===n?void 0:null===(r=n.pdpAuth)||void 0===r?void 0:r.get)||b.Quectel_AT.pdpAuth.get)(t);}function tw(e,t,r,n,i){var a,o;return((null===(o=b[e])||void 0===o?void 0:null===(a=o.pdpAuth)||void 0===a?void 0:a.set)||b.Quectel_AT.pdpAuth.set)(t,r,n,i);}function tQ(e,t){var r,n;return((null===(n=b[t])||void 0===n?void 0:null===(r=n.pdpAuth)||void 0===r?void 0:r.parse)||b.Quectel_AT.pdpAuth.parse)(e);}},ab913c1e:function(e,t,r){"use strict";r.d(t,"__esModule",{value:!0}),r.d(t,"default",{enumerable:!0,get:function(){return x;}});var n=r("777fffbe"),i=r("177e1778"),a=n._(r("db459ee3")),o=n._(r("edf23c5e")),s=n._(r("331c9711")),l=n._(r("981039c1")),d=n._(r("2debfaf1")),u=n._(r("472a5919")),c=n._(r("5ae3eecd")),m=n._(r("8fe321bd")),p=r("38b26152"),f=n._(r("c92bb161")),v=r("07e29f98"),g=r("26bb85fb"),b=r("c172b4ba"),h=r("3b63c763"),y=r("ce2f9b01"),C=n._(r("a15d48dd")),S=r("574ee90d"),T=r("df8aa005");let A=`
  .transparent-input-number .ant-input-number-handler-wrap {
    background: transparent !important;
  }
  .transparent-input-number .ant-input-number-handler-up {
    background: transparent !important;
    border: none !important;
  }
  .transparent-input-number .ant-input-number-handler-down {
    background: transparent !important;
    border: none !important;
  }
`;if("undefined"!=typeof document){let e=document.createElement("style");e.textContent=A,document.head.appendChild(e);}function x(){let{ip:e,port:t}=(0,g.useWebSocketConfig)(),{setInitialState:r}=(0,S.useModel)("@@initialState");(0,T.useScrollReset)();let[n,s]=(0,b.useState)("Quectel_AT");return(0,b.useEffect)(()=>{e&&t&&"open"!==f.default.getStatus()&&f.default.connect(`ws://${e}:${t}`);let n=async()=>{await (0,v.ensureGroupReady)(e,t);let n=await (0,v.safeSendAT)("ATI"),{model:i}=(0,p.parseATISystemInfo)(n);r(e=>({...e,dynamicTitle:i?`${i}`:"Modem-Manager"}));};return n(),()=>{f.default.removeOnOpenCallback(n);};},[e,t]),(0,i.jsxs)(a.default,{gutter:[16,16],align:"stretch",children:[(0,i.jsx)(o.default,{xs:24,md:24,children:(0,i.jsx)(M,{})}),(0,i.jsx)(o.default,{xs:24,md:24,children:(0,i.jsx)(j,{})}),(0,i.jsx)(o.default,{xs:24,md:12,children:(0,i.jsx)(N,{})}),(0,i.jsx)(o.default,{xs:24,md:12,children:(0,i.jsx)(k,{lastStartTime:0,initUp:0,initDown:0})}),(0,i.jsx)(o.default,{xs:24,children:(0,i.jsx)(G,{})})]});}function M(){let e=(0,S.useIntl)(),[t,r]=(0,b.useState)(!1),[n,d]=(0,b.useState)(5),u=(0,b.useRef)(null),c=(0,b.useRef)(null),p=(0,b.useRef)(null),f=(0,b.useRef)(null);return(0,b.useEffect)(()=>{if(!t){u.current&&clearInterval(u.current);return;}return u.current=setInterval(()=>{var e,t,r,n,i,a;null===(t=c.current)||void 0===t||null===(e=t.refresh)||void 0===e||e.call(t),null===(n=p.current)||void 0===n||null===(r=n.refresh)||void 0===r||r.call(n),null===(a=f.current)||void 0===a||null===(i=a.refresh)||void 0===i||i.call(a);},1e3*n),()=>{u.current&&clearInterval(u.current);};},[t,n]),(0,i.jsx)(s.default,{className:"my-card",style:{},title:(0,i.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)("span",{style:{lineHeight:"32px"},children:e.formatMessage({id:"pages.network.networkInfo"})}),(0,i.jsx)("span",{style:{background:"var(--ant-color-fill-tertiary)",borderRadius:4,padding:"0 8px",height:24,display:"inline-flex",alignItems:"center",marginLeft:12,fontSize:12,color:"var(--ant-color-text-secondary)",fontWeight:"normal",lineHeight:"32px"},children:e.formatMessage({id:"pages.network.networkInfoDesc"})})]}),extra:t?(0,i.jsxs)("button",{className:"my-btn",style:{display:"inline-flex",alignItems:"center",border:"1px solid var(--ant-color-primary)",borderRadius:6,padding:"0 12px",height:32,background:"var(--ant-color-info-bg)",boxSizing:"border-box",userSelect:"none",color:"var(--ant-color-primary)",fontWeight:500,fontSize:14,outline:"none",transition:"background 0.2s, border 0.2s"},type:"button",children:[(0,i.jsx)("span",{style:{marginRight:0,cursor:"pointer"},onClick:e=>{e.stopPropagation(),r(!1);},children:e.formatMessage({id:"pages.network.autoRefresh"})}),(0,i.jsx)(m.default,{min:2,max:60,value:n,onChange:e=>d(Number(e)||5),onKeyDown:e=>{["ArrowUp","ArrowDown","Tab","Shift","Control","Alt"].includes(e.key)||e.preventDefault();},style:{width:52,height:"100%",border:"none",background:"transparent",color:"var(--ant-color-primary)",fontSize:14,textAlign:"left",margin:"0px",outline:"none",boxShadow:"none",lineHeight:"24px",padding:0},className:"transparent-input-number"}),(0,i.jsx)("span",{style:{marginLeft:2,lineHeight:"24px"},onClick:e=>{e.stopPropagation(),r(!1);},children:e.formatMessage({id:"pages.dashboard.seconds"})})]}):(0,i.jsx)(l.default,{className:"my-btn",type:"default",style:{borderRadius:6,padding:"0 18px",height:32,fontSize:14,fontWeight:500,marginLeft:8,borderColor:"var(--ant-color-primary)",color:"var(--ant-color-primary)"},onClick:()=>r(!0),children:e.formatMessage({id:"pages.network.autoRefresh"})}),children:(0,i.jsxs)(a.default,{gutter:[14,14],children:[(0,i.jsx)(o.default,{xs:24,md:16,children:(0,i.jsx)(_,{ref:c})}),(0,i.jsx)(o.default,{xs:24,md:8,children:(0,i.jsx)(D,{ref:p})}),(0,i.jsx)(o.default,{xs:24,md:24,children:(0,i.jsx)(K,{ref:f})})]})});}function N(){let e=(0,S.useIntl)(),{ip:t,port:r}=(0,g.useWebSocketConfig)(),[n,a]=(0,b.useState)(!1),[o,l]=(0,b.useState)(!1),[d,h]=(0,b.useState)(500),[y,C]=(0,b.useState)(null),[T,A]=(0,b.useState)(null),[x,M]=(0,b.useState)(""),[N,R]=(0,b.useState)(""),[_,D]=(0,b.useState)(""),K=(0,b.useRef)(null),k=async()=>{try{await (0,v.ensureGroupReady)(t,r);let e=await (0,v.getCurrentGroupAsync)(t,r);D(e);let n=(0,p.getSignedRateCmds)(e),i=[];for(let e of n)i.push(await (0,v.safeSendAT)(e));let a=(0,p.parseSignedRate)(i,e);A(a),R((null==a?void 0:a.apn)||"");}catch{}},G=async()=>{try{await (0,v.ensureGroupReady)(t,r);let e=await (0,v.getCurrentGroupAsync)(t,r),n=(0,p.getOperatorCmd)(e),i=[];for(let e of n)i.push(await (0,v.safeSendAT)(e));M((0,p.parseOperator)(i,e)||"");}catch{}};return(0,b.useEffect)(()=>{let e=!1,t=()=>{e||(k(),G());};return f.default.getStatus&&"open"===f.default.getStatus()?t():f.default.addOnOpenCallback(t),()=>{e=!0,f.default.removeOnOpenCallback(t);};},[t,r]),(0,b.useEffect)(()=>{if(!n){C(null),K.current&&clearInterval(K.current);return;}async function e(){try{await (0,v.ensureGroupReady)(t,r);let e=await (0,v.getCurrentGroupAsync)(t,r),n=(0,p.getRealtimeRateCmd)(e),i=await (0,v.safeSendAT)(n),a=(0,p.parseRealtimeRate)(i,e);a&&C(a);}catch{}}return e(),K.current=setInterval(e,d),()=>{K.current&&clearInterval(K.current);};},[n,d,t,r]),(0,i.jsxs)(s.default,{className:"my-card",title:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:e.formatMessage({id:"pages.network.networkSpeed"})}),(0,i.jsx)("span",{style:{background:"var(--ant-color-fill-tertiary)",borderRadius:4,padding:"0 8px",height:24,display:"inline-flex",alignItems:"center",marginLeft:12,fontSize:12,color:"var(--ant-color-text-secondary)",fontWeight:"normal",lineHeight:"32px"},children:e.formatMessage({id:"pages.network.networkSpeedDesc"})})]}),extra:(0,i.jsx)(c.default,{checked:n,onChange:e=>{e?l(!0):a(!1);},checkedChildren:e.formatMessage({id:"pages.network.realtimeSpeedOn"}),unCheckedChildren:e.formatMessage({id:"pages.network.realtimeSpeedOff"})}),style:{marginTop:0},styles:{body:{padding:24}},children:[(0,i.jsx)(w,{showRealtime:n,realtimeRate:y,onSwitch:e=>{e?l(!0):a(!1);}}),(0,i.jsx)(Q,{signedRate:T,operator:x,apn:N}),(0,i.jsxs)(u.default,{title:e.formatMessage({id:"pages.network.refreshInterval"}),open:o,onCancel:()=>{l(!1),a(!1);},onOk:()=>{l(!1),a(!0);},okText:e.formatMessage({id:"pages.network.confirm"}),cancelText:e.formatMessage({id:"pages.network.cancel"}),styles:{footer:{textAlign:"right"}},okButtonProps:{className:"my-btn",type:"primary"},cancelButtonProps:{className:"my-btn"},children:[(0,i.jsxs)("div",{style:{marginTop:16,marginBottom:12},children:[e.formatMessage({id:"pages.network.refreshInterval"}),"\uFF08","FM350_AT"===_?"1500":"200","-65535ms\uFF09\uFF1A"]}),(0,i.jsx)(m.default,{min:"FM350_AT"===_?1500:200,max:65535,value:d,onChange:e=>h(Number(e)||("FM350_AT"===_?1500:200)),addonAfter:"ms",style:{width:"100%",alignItems:"center"}}),(0,i.jsx)("div",{style:{marginTop:12,marginBottom:16,color:"var(--ant-color-text-secondary)",fontSize:12},children:e.formatMessage({id:"pages.network.refreshIntervalDesc"})})]})]});}function w({showRealtime:e,realtimeRate:t,onSwitch:r}){let n=(0,S.useIntl)();return(0,i.jsxs)("div",{style:{position:"relative"},children:[(0,i.jsx)(s.default,{className:"my-inline-card",title:(0,i.jsx)("span",{style:{fontSize:14},children:n.formatMessage({id:"pages.network.realtimeSpeed"})}),style:{marginBottom:24,background:"var(--ant-color-fill-tertiary)",boxShadow:"none",border:"none",opacity:e?1:.2,filter:e?"none":"grayscale(1)",minHeight:88},styles:{body:{padding:24,minHeight:88}},children:e&&(0,i.jsxs)(a.default,{gutter:24,style:{padding:"6px 16px"},children:[(0,i.jsxs)(o.default,{span:12,style:{},children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:14},children:n.formatMessage({id:"pages.dashboard.uploadSpeed"})}),(0,i.jsx)("div",{style:{fontSize:18,color:(0,h.getSpeedColor)(t?t.up:0)},children:(0,h.formatSpeed)(t?t.up:0,!1)})]}),(0,i.jsxs)(o.default,{span:12,style:{},children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:14},children:n.formatMessage({id:"pages.dashboard.downloadSpeed"})}),(0,i.jsx)("div",{style:{fontSize:18,color:(0,h.getSpeedColor)(t?t.down:0)},children:(0,h.formatSpeed)(t?t.down:0,!1)})]})]})}),!e&&(0,i.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:14,color:"var(--ant-color-text-secondary)",opacity:1,zIndex:10,pointerEvents:"none"},children:n.formatMessage({id:"pages.network.notEnabledRealtimeSpeed"})})]});}function Q({signedRate:e,operator:t,apn:r}){let n=(0,S.useIntl)();return(0,i.jsx)(s.default,{className:"my-inline-card",style:{background:"var(--ant-color-fill-tertiary)",marginBottom:0,boxShadow:"none",border:"none"},styles:{body:{}},title:(0,i.jsx)("div",{style:{fontWeight:"bold",fontSize:14,marginBottom:0,color:"var(--ant-color-text)",background:"transparent"},children:n.formatMessage({id:"pages.network.currentNetwork"})}),children:(0,i.jsxs)(a.default,{gutter:[12,12],style:{},children:[(0,i.jsx)(o.default,{xs:12,md:6,children:(0,i.jsxs)("div",{style:{background:"var(--ant-color-bg-container)",borderRadius:6,padding:"8px 12px",textAlign:"left",width:"100%",height:"100%",boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontSize:12,color:"var(--ant-color-text-secondary)"},children:n.formatMessage({id:"pages.dashboard.uploadSpeed"})}),(0,i.jsx)("div",{style:{fontSize:16,color:"var(--ant-color-success)",fontWeight:600,display:"inline-block"},children:(null==e?void 0:e.up)||"-"}),(0,i.jsx)("span",{style:{fontSize:12,color:"var(--ant-color-text)",marginLeft:4},children:"Mbps"})]})}),(0,i.jsx)(o.default,{xs:12,md:6,children:(0,i.jsxs)("div",{style:{background:"var(--ant-color-bg-container)",borderRadius:6,padding:"8px 12px",textAlign:"left",width:"100%",height:"100%",boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontSize:12,color:"var(--ant-color-text-secondary)"},children:n.formatMessage({id:"pages.dashboard.downloadSpeed"})}),(0,i.jsx)("div",{style:{fontSize:16,color:"var(--ant-color-success)",fontWeight:600,display:"inline-block"},children:(null==e?void 0:e.down)||"-"}),(0,i.jsx)("span",{style:{fontSize:12,color:"var(--ant-color-text)",marginLeft:4},children:"Mbps"})]})}),(0,i.jsx)(o.default,{xs:12,md:6,children:(0,i.jsxs)("div",{style:{background:"var(--ant-color-bg-container)",borderRadius:6,padding:"8px 12px",textAlign:"left",width:"100%",height:"100%",boxShadow:"none"},children:[(0,i.jsx)("div",{style:{fontSize:12,color:"var(--ant-color-text-secondary)"},children:"APN"}),(0,i.jsx)("div",{style:{fontSize:14,fontWeight:600},children:r||"-"})]})}),(0,i.jsx)(o.default,{xs:12,md:6,children:(0,i.jsxs)("div",{style:{background:"var(--ant-color-bg-container)",borderRadius:6,padding:"8px 12px",textAlign:"left",width:"100%",height:"100%",boxShadow:"none"},children:[(0,i.jsxs)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:12},children:["QCI (",n.formatMessage({id:"pages.network.qci"}),")"]}),(0,i.jsxs)("div",{style:{fontSize:14,fontWeight:600},children:[n.formatMessage({id:"pages.dashboard.level"}),(null==e?void 0:e.downQci)||"-"]})]})}),(0,i.jsx)(o.default,{span:24,children:(0,i.jsx)("div",{style:{background:"var(--ant-color-bg-container)",borderRadius:6,padding:"8px 12px",textAlign:"center",width:"100%",height:"100%",boxShadow:"none"},children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:["\u4E2D\u56FD\u79FB\u52A8"===t&&(0,i.jsx)("img",{src:"/icons/china_mobile.png",alt:n.formatMessage({id:"pages.network.chinaMobile"}),style:{width:40,height:40,marginRight:16}}),"\u4E2D\u56FD\u8054\u901A"===t&&(0,i.jsx)("img",{src:"/icons/china_unicom.png",alt:n.formatMessage({id:"pages.network.chinaUnicom"}),style:{width:40,height:40,marginRight:16}}),"\u4E2D\u56FD\u7535\u4FE1"===t&&(0,i.jsx)("img",{src:"/icons/china_telecom.png",alt:n.formatMessage({id:"pages.network.chinaTelecom"}),style:{width:40,height:40,marginRight:16}}),"\u4E2D\u56FD\u5E7F\u7535"===t&&(0,i.jsx)("img",{src:"/icons/china_broadcast.png",alt:n.formatMessage({id:"pages.network.chinaBroadcast"}),style:{width:40,height:40,marginRight:16}}),t&&!["\u4E2D\u56FD\u79FB\u52A8","\u4E2D\u56FD\u8054\u901A","\u4E2D\u56FD\u7535\u4FE1","\u4E2D\u56FD\u5E7F\u7535"].includes(t)&&(0,i.jsx)("img",{src:"/icons/unknow_operator.png",alt:n.formatMessage({id:"pages.network.unknownOperator"}),style:{width:40,height:40,marginRight:16}}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center"},children:[(0,i.jsx)("div",{style:{fontSize:12,color:"var(--ant-color-text-secondary)"},children:n.formatMessage({id:"pages.network.operator"})}),(0,i.jsx)("div",{style:{fontSize:14,fontWeight:"bold"},children:t||"-"})]})]})})})]})});}function R({level:e,color:t}){let r=[8,16,24,32];return(0,i.jsx)("span",{style:{display:"inline-flex",alignItems:"flex-end",height:36,marginRight:2},children:[1,2,3,4].map(n=>(0,i.jsx)("span",{style:{width:8,height:r[n-1],marginLeft:3,borderRadius:1,background:n<=e?t:"var(--ant-color-fill-tertiary)",display:"inline-block",transition:"background 0.3s"}},n))});}let _=(0,b.forwardRef)(function(e,t){let r=(0,S.useIntl)(),{ip:n,port:l}=(0,g.useWebSocketConfig)(),[u,c]=(0,b.useState)(!0),[m,C]=(0,b.useState)(null),[T,A]=(0,b.useState)(""),[x,M]=(0,b.useState)(void 0),[N,w]=(0,b.useState)(-157),[Q,_]=(0,b.useState)(-24),[D,K]=(0,b.useState)(-44),{message:k}=d.default.useApp();(0,b.useImperativeHandle)(t,()=>({refresh:G}),[n,l]);let G=async()=>{c(!0);try{var e,t,i;let r;await (0,v.ensureGroupReady)(n,l);let a=await (0,v.getCurrentGroupAsync)(n,l),o=await (0,v.safeSendAT)((0,p.getQRSRPCmd)(a)),s=await (0,v.safeSendAT)((0,p.getQSINRCmd)(a)),d=await (0,v.safeSendAT)((0,p.getQRSRQCmd)(a)),u=await (0,v.safeSendAT)((0,p.getNetworkTypeCmd)(a));for(let e of(0,p.getRegStatusCmd)(a)){let t=await (0,v.safeSendAT)(e);if(r=(0,p.parseRegStatus)(t,a))break;}C({qrsrp:(0,p.parseQRSRP)(o,a),qsinr:(0,p.parseQSINR)(s,a),qrsrq:(0,p.parseQRSRQ)(d,a)}),w((null===(e=(0,p.parseQRSRP)(o,a))||void 0===e?void 0:e.value)??-157),_((null===(t=(0,p.parseQSINR)(s,a))||void 0===t?void 0:t.value)??-24),K((null===(i=(0,p.parseQRSRQ)(d,a))||void 0===i?void 0:i.value)??-44),A((0,p.parseNetworkType)(u,a)??""),M(r);}catch(t){let e=(0,y.formatErrorMessage)(t,r);k.error(r.formatMessage({id:"pages.network.signalQueryFailed"})+": "+e);}c(!1);};(0,b.useEffect)(()=>(f.default.getStatus&&"open"===f.default.getStatus()?G():f.default.addOnOpenCallback(G),()=>{f.default.removeOnOpenCallback(G);}),[n,l]);let j=(0,h.getSignalLevel)(N,"rsrp"),E=(0,h.getSignalColor)(N,"rsrp"),I="var(--ant-color-warning)",z="var(--ant-color-warning-bg)",P=T||r.formatMessage({id:"pages.dashboard.regStatus.unknown"});T&&T.toUpperCase().includes("NR")?(I="var(--ant-color-success)",z="var(--ant-color-success-bg)"):T&&T.toUpperCase().includes("LTE")&&(I="var(--ant-color-primary)",z="var(--ant-color-info-bg)");let q={0:{text:r.formatMessage({id:"pages.dashboard.regStatus.notRegistered"}),color:"var(--ant-color-error)",bg:"var(--ant-color-error-bg)"},1:{text:r.formatMessage({id:"pages.dashboard.regStatus.registeredLocal"}),color:"var(--ant-color-success)",bg:"var(--ant-color-success-bg)"},2:{text:r.formatMessage({id:"pages.dashboard.regStatus.searching"}),color:"var(--ant-color-warning)",bg:"var(--ant-color-warning-bg)"},3:{text:r.formatMessage({id:"pages.dashboard.regStatus.rejected"}),color:"var(--ant-color-error)",bg:"var(--ant-color-error-bg)"},4:{text:r.formatMessage({id:"pages.dashboard.regStatus.unknown"}),color:"var(--ant-color-text-secondary)",bg:"var(--ant-color-fill-tertiary)"},5:{text:r.formatMessage({id:"pages.dashboard.regStatus.registeredRoaming"}),color:"var(--ant-color-primary)",bg:"var(--ant-color-info-bg)"},6:{text:r.formatMessage({id:"pages.dashboard.regStatus.registeredSmsLocal"}),color:"var(--ant-color-success)",bg:"var(--ant-color-success-bg)"},7:{text:r.formatMessage({id:"pages.dashboard.regStatus.registeredSmsRoaming"}),color:"var(--ant-color-success)",bg:"var(--ant-color-success-bg)"},8:{text:r.formatMessage({id:"pages.dashboard.regStatus.emergencyOnly"}),color:"var(--ant-color-warning)",bg:"var(--ant-color-warning-bg)"},9:{text:r.formatMessage({id:"pages.dashboard.regStatus.csfbLocal"}),color:"var(--ant-color-text-secondary)",bg:"var(--ant-color-fill-tertiary)"},10:{text:r.formatMessage({id:"pages.dashboard.regStatus.csfbRoaming"}),color:"var(--ant-color-text-secondary)",bg:"var(--ant-color-fill-tertiary)"}}[x??0]||{text:r.formatMessage({id:"pages.dashboard.regStatus.unknownStatus"}),color:"var(--ant-color-text-secondary)",bg:"var(--ant-color-fill-tertiary)"};return(0,i.jsx)(s.default,{style:{},title:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontSize:14,marginRight:12},children:r.formatMessage({id:"pages.network.signalBoard"})}),(0,i.jsx)("span",{style:{background:z,color:I,borderRadius:4,fontSize:12,padding:"2px 8px",marginRight:8},children:P}),(0,i.jsx)("span",{style:{background:q.bg,color:q.color,borderRadius:4,fontSize:12,padding:"2px 8px"},children:q.text})]}),styles:{header:{background:"var(--ant-color-fill-tertiary)"},body:{padding:0}},className:"my-inline-card",children:(0,i.jsxs)(a.default,{gutter:16,className:"status-row",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,i.jsxs)(o.default,{span:6,style:{textAlign:"center"},children:[(0,i.jsx)(R,{level:j,color:E}),(0,i.jsxs)("div",{style:{fontSize:20,color:E,fontWeight:"bold",marginBottom:4},children:[Math.max(0,Math.min(100,Math.round((N+120)*100/40))),"%"]}),(0,i.jsx)("div",{style:{fontSize:12},children:r.formatMessage({id:"pages.network.signalQuality"})})]}),(0,i.jsxs)(o.default,{span:6,style:{textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:28,color:(0,h.getSignalColor)(N,"rsrp"),fontWeight:"bold"},children:N}),(0,i.jsxs)("div",{style:{fontSize:12},children:[r.formatMessage({id:"pages.dashboard.rsrp"})," (dBm)"]}),(0,i.jsx)("div",{style:{fontSize:12},children:r.formatMessage({id:"pages.dashboard.rsrpDesc"})})]}),(0,i.jsxs)(o.default,{span:6,style:{textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:28,color:(0,h.getSignalColor)(Q,"sinr"),fontWeight:"bold"},children:Q}),(0,i.jsxs)("div",{style:{fontSize:12},children:[r.formatMessage({id:"pages.dashboard.sinr"})," (dB)"]}),(0,i.jsx)("div",{style:{fontSize:12},children:r.formatMessage({id:"pages.dashboard.sinrDesc"})})]}),(0,i.jsxs)(o.default,{span:6,style:{textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:28,color:(0,h.getSignalColor)(D,"rsrq"),fontWeight:"bold"},children:D}),(0,i.jsxs)("div",{style:{fontSize:12},children:[r.formatMessage({id:"pages.dashboard.rsrq"})," (dB)"]}),(0,i.jsx)("div",{style:{fontSize:12},children:r.formatMessage({id:"pages.dashboard.rsrqDesc"})})]})]})});}),D=(0,b.forwardRef)(function(e,t){let r=(0,S.useIntl)(),{ip:n,port:a}=(0,g.useWebSocketConfig)(),[o,l]=(0,b.useState)(!0),[u,c]=(0,b.useState)(null),{message:m}=d.default.useApp(),h=async()=>{l(!0);try{await (0,v.ensureGroupReady)(n,a);let e=await (0,v.getCurrentGroupAsync)(n,a),t=await (0,v.safeSendAT)((0,p.getQENGServingCellCmd)(e));c((0,p.parseQENGServingCell)(t,e));}catch(t){let e=(0,y.formatErrorMessage)(t,r);m.error(r.formatMessage({id:"pages.network.networkParamQueryFailed"})+": "+e);}l(!1);};(0,b.useImperativeHandle)(t,()=>({refresh:h}),[n,a]),(0,b.useEffect)(()=>{let e=!1,t=()=>{e||h();};return f.default.getStatus&&"open"===f.default.getStatus()?t():f.default.addOnOpenCallback(t),()=>{e=!0,f.default.removeOnOpenCallback(t);};},[n,a]);let C=u||{};return(0,i.jsx)(s.default,{style:{background:"var(--ant-color-fill-tertiary)"},title:(0,i.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,i.jsx)("span",{style:{fontSize:14,marginRight:12},children:r.formatMessage({id:"pages.network.networkParams"})})}),className:"my-inline-card",children:(0,i.jsxs)("div",{style:{fontSize:16,color:"var(--ant-color-text)",display:"grid",gridTemplateColumns:"1fr 1fr",rowGap:6,columnGap:12,alignItems:"center",padding:0},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:12},children:"PCI"}),(0,i.jsx)("div",{style:{fontWeight:"bold"},children:C.pci??"-"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:12},children:r.formatMessage({id:"pages.network.freq"})}),(0,i.jsx)("div",{style:{fontWeight:"bold"},children:C.earfcn??"-"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:12},children:"MCC-MNC"}),(0,i.jsxs)("div",{style:{fontWeight:"bold"},children:[C.mcc??"-",C.mnc?"-"+C.mnc:""]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:12},children:"LAC"}),(0,i.jsx)("div",{style:{fontWeight:"bold"},children:C.lac??"-"})]}),(0,i.jsxs)("div",{style:{gridColumn:"1 / span 2"},children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:12},children:r.formatMessage({id:"pages.network.cellId"})}),(0,i.jsx)("div",{style:{fontWeight:"bold"},children:C.cellId??"-"})]})]})});}),K=(0,b.forwardRef)(function(e,t){let r=(0,S.useIntl)(),{ip:n,port:l}=(0,g.useWebSocketConfig)(),[u,c]=(0,b.useState)(!0),[m,C]=(0,b.useState)(null),{message:T}=d.default.useApp(),A=async()=>{c(!0);try{await (0,v.ensureGroupReady)(n,l);let e=await (0,v.getCurrentGroupAsync)(n,l),t=(0,p.getQCAINFOCmd)(e),r=[];for(let e of t)r.push(await (0,v.safeSendAT)(e));C((0,p.parseQCAINFO)(r,e));}catch(t){let e=(0,y.formatErrorMessage)(t,r);T.error(r.formatMessage({id:"pages.network.carrierAggQueryFailed"})+": "+e);}c(!1);};(0,b.useImperativeHandle)(t,()=>({refresh:A}),[n,l]),(0,b.useEffect)(()=>(f.default.getStatus&&"open"===f.default.getStatus()?A():f.default.addOnOpenCallback(A),()=>{f.default.removeOnOpenCallback(A);}),[n,l]);let x=(e,t,r)=>{var n,a;let o,l,d,u;if(!t)return null;let c=(0,S.useIntl)(),m={earfcn:c.formatMessage({id:"pages.network.freq"}),narfcn:c.formatMessage({id:"pages.network.freq"}),arfcn:c.formatMessage({id:"pages.network.freq"}),bw:c.formatMessage({id:"pages.network.bandwidth"}),dl_bw:c.formatMessage({id:"pages.network.downlinkBandwidth"}),ul_bw:c.formatMessage({id:"pages.network.uplinkBandwidth"}),dl_bandwidth:c.formatMessage({id:"pages.network.downlinkBandwidth"}),ul_bandwidth:c.formatMessage({id:"pages.network.uplinkBandwidth"}),nr_dl_bandwidth:c.formatMessage({id:"pages.network.downlinkBandwidth"}),nr_ul_bandwidth:c.formatMessage({id:"pages.network.uplinkBandwidth"}),dl_freq:c.formatMessage({id:"pages.network.downlinkFreq"}),ul_freq:c.formatMessage({id:"pages.network.uplinkFreq"}),cellId:c.formatMessage({id:"pages.network.cellId"}),pci:"PCI",band:"Band",dl_mimo:c.formatMessage({id:"pages.network.downlinkMimo"}),ul_mimo:c.formatMessage({id:"pages.network.uplinkMimo"}),dl_modulation:c.formatMessage({id:"pages.network.downlinkModulation"}),ul_modulation:c.formatMessage({id:"pages.network.uplinkModulation"}),rsrp:"RSRP",rsrq:"RSRQ",rssi:"RSSI",sinr:"SINR",rssnr:"RSSNR",mcc:"MCC",mnc:"MNC",tac:"TAC",lac:"LAC",scs:"SCS",scell_state:c.formatMessage({id:"pages.network.scellState"}),scell_state_text:c.formatMessage({id:"pages.network.scellState"}),ul_configured:c.formatMessage({id:"pages.network.ulCaConfig"}),ul_configured_text:c.formatMessage({id:"pages.network.ulCaConfig"}),rat:c.formatMessage({id:"pages.network.rat"}),duplex:c.formatMessage({id:"pages.network.duplex"}),cqi:"CQI",tx_power:"TX Power",rscp:"RSCP",ecio:"ECIO",phych:"PHYSICAL CH",sf:"SF",slot:"SLOT",speech_code:"Speech Code",com_mod:"Com Mod"},p=Object.keys(t).filter(e=>"scell_state"!==e&&"scell_state_text"!==e&&void 0!==t[e]&&""!==t[e]);for(p.length>8&&p.includes("band")&&(p=p.filter(e=>"band"!==e)),p.length>8&&p.includes("bw")&&(p=p.filter(e=>"bw"!==e)),p.length>8&&p.includes("rsrp")&&(p=p.filter(e=>"rsrp"!==e)),p.length>8&&p.includes("rsrq")&&(p=p.filter(e=>"rsrq"!==e)),p.length>8&&p.includes("rssi")&&(p=p.filter(e=>"rssi"!==e)),p.length>8&&p.includes("sinr")&&(p=p.filter(e=>"sinr"!==e)),p.length>8&&p.includes("cqi")&&(p=p.filter(e=>"cqi"!==e)),p.length>8&&p.includes("rat")&&(p=p.filter(e=>"rat"!==e)),p=p.slice(0,8);p.length<8;)p.push("");if(t.earfcn){let e=Number(t.earfcn);o=(0,h.getNrBandByArfcn)(e),l=(0,h.getLteBandByEarfcn)(e);}return(0,i.jsx)(s.default,{style:{flex:1,boxShadow:"0px 2px 8px var(--ant-color-fill-tertiary)",borderLeft:`3px solid ${r?"var(--ant-color-primary)":"var(--ant-color-success)"}`,borderRight:"1px solid var(--ant-color-fill-secondary)",borderTop:"1px solid var(--ant-color-fill-secondary)",borderBottom:"1px solid var(--ant-color-fill-secondary)"},variant:"borderless",styles:{header:{background:"var(--ant-color-fill-tertiary)"},body:{padding:0}},title:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontSize:14,color:r?"var(--ant-color-primary)":"#00C853",marginRight:12},children:e}),function(e,t,r){let n="",a="",o="";if(e.band){let t=String(e.band).toUpperCase();t.includes("NR")||t.includes("5G")||t.startsWith("N")?(n="NR",a="var(--ant-color-success)"):(t.includes("LTE")||t.includes("4G")||t.startsWith("B"))&&(n="LTE",a="var(--ant-color-primary)");}return!n&&e.earfcn&&(t?(n="NR",a="var(--ant-color-success)",o="var(--ant-color-success-bg)"):r&&(n="LTE",a="var(--ant-color-primary)",o="var(--ant-color-primary-bg)")),n?(0,i.jsx)("span",{style:{color:a,background:o,borderRadius:4,fontSize:12,padding:"1px 8px",marginLeft:6},children:n}):null;}(t,o,l),(n=o,a=l,d="",u="",t.earfcn&&(n?(d="N"+n,u="var(--ant-color-success)"):a&&(d="B"+a,u="var(--ant-color-primary)")),d?(0,i.jsx)("span",{style:{color:u,border:`1px solid ${u}`,borderRadius:4,fontSize:12,padding:"0 6px",marginLeft:12},children:d}):null)]}),!r&&(t.scell_state_text||t.scell_state)&&(0,i.jsxs)("div",{style:{fontSize:12,fontWeight:500,color:"var(--ant-color-text-secondary)",marginLeft:8},children:[c.formatMessage({id:"pages.network.status"}),": ",t.scell_state_text||t.scell_state]})]}),className:"my-inline-card",children:(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0 0px"},children:Array.from({length:8}).map((e,r)=>{let n=p[r],a=n?t[n]:"";if("mcc"===n&&t.mcc&&t.mnc)a=`${t.mcc}-${t.mnc}`;else if("mnc"===n&&t.mcc&&t.mnc)return null;return(0,i.jsxs)("div",{style:{marginBottom:3,marginTop:3},children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:12},children:n?"mcc"===n&&t.mcc&&t.mnc?"MCC-MNC":m[n]||n:""}),(0,i.jsx)("div",{style:{fontWeight:500,fontSize:14},children:a})]},r);})})});},M=(()=>{if(!m)return{count:0,totalDl:0,totalUl:0};let e=0,t=0,r=0,n=(e,t,r)=>{let n=0,i=0,a=e[t]||e.bw||e.dl_bandwidth||e.nr_dl_bandwidth,o=e[r]||e.bw||e.ul_bandwidth||e.nr_ul_bandwidth;if(a){let e=String(a).match(/(\d+\.?\d*)/);if(e){let t=parseFloat(e[1]);n=isNaN(t)?0:t;}}if(o&&"-"!==o){let e=String(o).match(/(\d+\.?\d*)/);if(e){let t=parseFloat(e[1]);i=isNaN(t)?0:t;}}return{dl:n,ul:i};};if(m.pcc){e++;let i=n(m.pcc,"dl_bw","ul_bw");t+=i.dl,r+=i.ul;}return m.scc&&m.scc.length>0&&m.scc.forEach(i=>{e++;let a=n(i,"dl_bw","ul_bw");t+=a.dl,r+=a.ul;}),{count:e,totalDl:t,totalUl:r};})(),N=[];if(m&&m.pcc&&N.push(x(r.formatMessage({id:"pages.network.mainCarrier"}),m.pcc,!0)),m&&m.scc&&m.scc.length>0)for(let e=0;e<Math.min(2,m.scc.length);e++)N.push(x(`${r.formatMessage({id:"pages.network.auxCarrier"})}${e+1}`,m.scc[e],!1));return(0,i.jsx)(s.default,{title:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontSize:14,marginRight:12},children:r.formatMessage({id:"pages.network.carrierAgg"})}),M.count>0&&(0,i.jsxs)("span",{style:{fontSize:14,color:"var(--ant-color-primary)"},children:["(",M.count,r.formatMessage({id:"pages.network.carriers"})," | ",r.formatMessage({id:"pages.network.totalBandwidth"}),": ",r.formatMessage({id:"pages.network.downlink"}),(0,h.formatNumber)(M.totalDl),"MHz/",r.formatMessage({id:"pages.network.uplink"}),(0,h.formatNumber)(M.totalUl),"MHz)"]})]}),styles:{header:{background:"var(--ant-color-fill-tertiary)"}},className:"my-inline-card",children:(0,i.jsx)(a.default,{gutter:[16,16],children:N.length>0?N.map((e,t)=>(0,i.jsx)(o.default,{xs:24,md:8,children:e},t)):(0,i.jsx)(o.default,{style:{width:"100%"},children:(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,i.jsx)("img",{src:"/icons/zanwuxinxi.svg",alt:r.formatMessage({id:"pages.network.noCarrierData"}),style:{width:128,height:128,marginBottom:8,marginLeft:0,opacity:.6}}),(0,i.jsx)("div",{style:{fontSize:14,color:"var(--ant-color-text-secondary)"},children:r.formatMessage({id:"pages.network.noCarrierData"})})]})})})});});function k({lastStartTime:e,initUp:t,initDown:r}){let n=(0,S.useIntl)(),{ip:d,port:u,swapTrafficStats:c}=(0,g.useWebSocketConfig)(),[y,C]=(0,b.useState)(!1),[T,A]=(0,b.useState)(null),[x,M]=(0,b.useState)(!1),[N,w]=(0,b.useState)(5),[Q,R]=(0,b.useState)(!1),[_,D]=(0,b.useState)(!0),K=(0,b.useRef)(null),[k,G]=(0,b.useState)(e||0),[j,E]=(0,b.useState)(t||0),[I,z]=(0,b.useState)(r||0),P=async(e=!1)=>{e&&C(!0);try{await (0,v.ensureGroupReady)(d,u);let e=await (0,v.getCurrentGroupAsync)(d,u),t=(0,p.getTrafficStatCmds)(e),r=[];for(let e of t)r.push(await (0,v.safeSendAT)(e));let n=(0,p.parseTrafficStat)(r,e,c);if(A(n),0===k&&(null==n?void 0:n.lastConnectTime)&&(null==n?void 0:n.nowTime)){let e=(0,h.formatTime)(n.lastConnectTime),t=(0,h.formatTime)(n.nowTime);e&&t&&G(Math.max(0,Math.floor((t.getTime()-e.getTime())/1e3)));}0===j&&(null==n?void 0:n.up)&&E(n.up),0===I&&(null==n?void 0:n.down)&&z(n.down);}catch{}e&&C(!1),D(!1);};(0,b.useEffect)(()=>{if(!x){K.current&&clearInterval(K.current);return;}return K.current=setInterval(()=>P(!1),1e3*N),()=>{K.current&&clearInterval(K.current);};},[x,N,d,u]),(0,b.useEffect)(()=>(f.default.getStatus&&"open"===f.default.getStatus()?P(!0):f.default.addOnOpenCallback(()=>P(!0)),()=>{}),[d,u]);let q=async()=>{C(!0);try{await (0,v.ensureGroupReady)(d,u);let e=await (0,v.getCurrentGroupAsync)(d,u);for(let t of(0,p.resetTrafficStatCmds)(e))await (0,v.safeSendAT)(t);G(0),E(0),z(0),P(!0);}catch{}C(!1);};function L(e){if(!e||isNaN(e))return"-";if(Q){let t=Math.floor(e/86400),r=Math.floor(e%86400/3600),n=Math.floor(e%3600/60);return`${t}\u{5929}${r}\u{65F6}${n}\u{5206}${e%60}\u{79D2}`;}{let t=Math.floor(e/3600),r=Math.floor(e%3600/60);return`${t}\u{65F6}${r}\u{5206}${e%60}\u{79D2}`;}}let O="-",$=0,W="-",F="-",H="-";if((null==T?void 0:T.lastConnectTime)&&(null==T?void 0:T.nowTime)){let e=(0,h.formatTime)(T.lastConnectTime),t=(0,h.formatTime)(T.nowTime);e&&t&&(O=L($=Math.max(0,Math.floor((t.getTime()-e.getTime())/1e3))));}if(void 0!==$&&0!==$){if(0!==k){let e=$-k;W=L(e>0?e:0);}else W=L($);}(null==T?void 0:T.up)!==void 0&&(F=0!==j?(0,h.formatBytes)(T.up-j>=0?T.up-j:0):(0,h.formatBytes)(T.up)),(null==T?void 0:T.down)!==void 0&&(H=0!==I?(0,h.formatBytes)(T.down-I>=0?T.down-I:0):(0,h.formatBytes)(T.down));let B={borderRadius:6,padding:"0 18px",height:32,fontSize:14,fontWeight:500,marginLeft:8};return(0,i.jsxs)(s.default,{className:"my-card",style:{background:"var(--ant-color-bg-container)",boxShadow:"0 2px 8px var(--ant-color-fill-tertiary)"},title:(0,i.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontWeight:"bold",fontSize:16},children:n.formatMessage({id:"pages.network.trafficStats"})}),(0,i.jsx)("span",{style:{background:"var(--ant-color-fill-tertiary)",borderRadius:4,padding:"0 8px",height:24,display:"inline-flex",alignItems:"center",marginLeft:12,fontSize:12,color:"var(--ant-color-text-secondary)",fontWeight:"normal",lineHeight:"32px"},children:n.formatMessage({id:"pages.network.trafficStatsDesc"})})]}),extra:x?(0,i.jsxs)("button",{className:"my-btn",style:{display:"inline-flex",alignItems:"center",border:"1px solid var(--ant-color-primary)",borderRadius:6,padding:"0 12px",height:32,background:"var(--ant-color-info-bg)",boxSizing:"border-box",userSelect:"none",color:"var(--ant-color-primary)",fontWeight:500,fontSize:14,outline:"none",transition:"background 0.2s, border 0.2s"},type:"button",children:[(0,i.jsx)("span",{style:{marginRight:0,cursor:"pointer"},onClick:e=>{e.stopPropagation(),M(!1);},children:n.formatMessage({id:"pages.network.autoRefresh"})}),(0,i.jsx)(m.default,{min:2,max:60,value:N,onChange:e=>w(Number(e)||5),onKeyDown:e=>{["ArrowUp","ArrowDown","Tab","Shift","Control","Alt"].includes(e.key)||e.preventDefault();},style:{width:52,height:"100%",border:"none",background:"transparent",color:"var(--ant-color-primary)",fontSize:14,textAlign:"left",margin:"0px",outline:"none",boxShadow:"none",lineHeight:"24px",padding:0},className:"transparent-input-number"}),(0,i.jsx)("span",{style:{marginLeft:2,lineHeight:"24px"},onClick:e=>{e.stopPropagation(),M(!1);},children:n.formatMessage({id:"pages.dashboard.seconds"})})]}):(0,i.jsx)(l.default,{className:"my-btn",type:"default",style:{borderRadius:6,padding:"0 18px",height:32,fontSize:14,fontWeight:500,marginLeft:8,borderColor:"var(--ant-color-primary)",color:"var(--ant-color-primary)",background:"var(--ant-color-bg-container)"},onClick:()=>M(!0),children:n.formatMessage({id:"pages.network.autoRefresh"})}),loading:y&&_,children:[(0,i.jsx)(s.default,{className:"my-inline-card",title:(0,i.jsx)("div",{style:{fontSize:14},children:n.formatMessage({id:"pages.network.lastConnection"})}),style:{background:"var(--ant-color-fill-tertiary)",marginBottom:24,boxShadow:"none",border:"none"},children:(0,i.jsxs)(a.default,{gutter:[16,8],style:{padding:"6px 12px"},children:[(0,i.jsxs)(o.default,{xs:24,md:8,children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:14},children:n.formatMessage({id:"pages.network.connectionDuration"})}),(0,i.jsx)("div",{style:{fontSize:16},children:W})]}),(0,i.jsxs)(o.default,{xs:24,md:8,children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:14},children:n.formatMessage({id:"pages.dashboard.uploadTraffic"})}),(0,i.jsx)("div",{style:{fontSize:16},children:F})]}),(0,i.jsxs)(o.default,{xs:24,md:8,children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:14},children:n.formatMessage({id:"pages.dashboard.downloadTraffic"})}),(0,i.jsx)("div",{style:{fontSize:16},children:H})]})]})}),(0,i.jsx)(s.default,{className:"my-inline-card",title:(0,i.jsx)("div",{style:{fontSize:14},children:n.formatMessage({id:"pages.network.totalStats"})}),style:{background:"var(--ant-color-fill-tertiary)",marginBottom:0,boxShadow:"none",border:"none"},children:(0,i.jsxs)(a.default,{gutter:[16,8],style:{padding:"6px 12px"},children:[(0,i.jsxs)(o.default,{xs:24,md:8,children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:14},children:n.formatMessage({id:"pages.network.totalConnectionDuration"})}),(0,i.jsx)("div",{style:{fontSize:16},children:O})]}),(0,i.jsxs)(o.default,{xs:24,md:8,children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:14},children:n.formatMessage({id:"pages.network.totalUpload"})}),(0,i.jsx)("div",{style:{fontSize:16},children:(0,h.formatBytes)(null==T?void 0:T.up)})]}),(0,i.jsxs)(o.default,{xs:24,md:8,children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:14},children:n.formatMessage({id:"pages.network.totalDownload"})}),(0,i.jsx)("div",{style:{fontSize:16},children:(0,h.formatBytes)(null==T?void 0:T.down)})]})]})}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:32},children:[(0,i.jsx)(l.default,{className:"my-btn",type:Q?"primary":"default",style:{...B},onClick:()=>R(e=>!e),children:Q?n.formatMessage({id:"pages.network.showHourTime"}):n.formatMessage({id:"pages.network.showDayTime"})}),(0,i.jsx)(l.default,{className:"my-btn",danger:!0,style:{...B,borderColor:"var(--ant-color-error)",color:"var(--ant-color-error)"},onClick:q,children:n.formatMessage({id:"pages.network.reset"})})]})]});}function G(){let e=(0,S.useIntl)(),{ip:t,port:r}=(0,g.useWebSocketConfig)(),[n,d]=(0,b.useState)(!1),[u,c]=(0,b.useState)(!0),[h,y]=(0,b.useState)([]),[C,T]=(0,b.useState)(!1),[A,x]=(0,b.useState)(5),M=(0,b.useRef)(null),N=async(e=!1)=>{e&&d(!0);try{await (0,v.ensureGroupReady)(t,r);let e=await (0,v.getCurrentGroupAsync)(t,r),n=(0,p.getTempCmds)(e),i=[];for(let e of n)i.push(await (0,v.safeSendAT)(e));y((0,p.parseTemp)(i,e));}catch{}e&&d(!1),c(!1);};(0,b.useEffect)(()=>{if(!C){M.current&&clearInterval(M.current);return;}return M.current=setInterval(()=>N(!1),1e3*A),()=>{M.current&&clearInterval(M.current);};},[C,A,t,r]),(0,b.useEffect)(()=>(f.default.getStatus&&"open"===f.default.getStatus()?N(!0):f.default.addOnOpenCallback(()=>N(!0)),()=>{f.default.removeOnOpenCallback(()=>N(!0));}),[t,r]);let w=h.filter(e=>e.value>0&&e.value<150);return(0,i.jsx)(s.default,{className:"my-card",style:{background:"var(--ant-color-bg-container)",boxShadow:"0 2px 8px var(--ant-color-fill-tertiary)"},title:(0,i.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,i.jsx)("span",{style:{fontWeight:"bold",fontSize:16},children:e.formatMessage({id:"pages.network.tempMonitor"})}),(0,i.jsx)("span",{style:{background:"var(--ant-color-fill-tertiary)",borderRadius:4,padding:"0 8px",height:24,display:"inline-flex",alignItems:"center",marginLeft:12,fontSize:12,color:"var(--ant-color-text-secondary)",fontWeight:"normal",lineHeight:"32px"},children:e.formatMessage({id:"pages.network.tempMonitorDesc"})})]}),extra:C?(0,i.jsxs)("button",{className:"my-btn",style:{display:"inline-flex",alignItems:"center",border:"1px solid var(--ant-color-primary)",borderRadius:6,padding:"0 12px",height:32,background:"var(--ant-color-info-bg)",boxSizing:"border-box",userSelect:"none",color:"var(--ant-color-primary)",fontWeight:500,fontSize:14,outline:"none",transition:"background 0.2s, border 0.2s"},type:"button",children:[(0,i.jsx)("span",{style:{marginRight:0,cursor:"pointer"},onClick:e=>{e.stopPropagation(),T(!1);},children:e.formatMessage({id:"pages.network.autoRefresh"})}),(0,i.jsx)(m.default,{min:2,max:60,value:A,onChange:e=>x(Number(e)||5),onKeyDown:e=>{["ArrowUp","ArrowDown","Tab","Shift","Control","Alt"].includes(e.key)||e.preventDefault();},style:{width:52,height:"100%",border:"none",background:"transparent",color:"var(--ant-color-primary)",fontSize:14,textAlign:"left",margin:"0px",outline:"none",boxShadow:"none",lineHeight:"24px",padding:0},className:"transparent-input-number"}),(0,i.jsx)("span",{style:{marginLeft:2,lineHeight:"24px"},onClick:e=>{e.stopPropagation(),T(!1);},children:e.formatMessage({id:"pages.dashboard.seconds"})})]}):(0,i.jsx)(l.default,{className:"my-btn",type:"default",style:{borderRadius:6,padding:"0 18px",height:32,fontSize:14,fontWeight:500,marginLeft:8,borderColor:"var(--ant-color-primary)",color:"var(--ant-color-primary)",background:"var(--ant-color-bg-container)"},onClick:()=>T(!0),children:e.formatMessage({id:"pages.network.autoRefresh"})}),loading:n&&u,children:(0,i.jsx)(a.default,{gutter:[16,16],children:0===w.length?(0,i.jsxs)("div",{style:{gridColumn:"1 / -1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",padding:"0px 0"},children:[(0,i.jsx)("img",{src:"/icons/zanwuxinxi.svg",alt:e.formatMessage({id:"pages.network.noTempData"}),style:{width:128,height:128,marginBottom:8,opacity:.6}}),(0,i.jsx)("div",{style:{fontSize:14,color:"var(--ant-color-text-secondary)"},children:e.formatMessage({id:"pages.network.noTempData"})})]}):w.map((t,r)=>{let n="var(--ant-color-success)";return t.value>75?n="var(--ant-color-error)":t.value>55&&(n="var(--ant-color-warning)"),(0,i.jsx)(o.default,{xs:24,sm:12,md:8,lg:6,xl:6,children:(0,i.jsxs)(s.default,{className:"my-inline-card",style:{borderRadius:4,boxShadow:"0px 2px 8px var(--ant-color-fill-secondary)",marginBottom:0,border:"1px solid var(--ant-color-fill-secondary)",minHeight:12},styles:{body:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"center",padding:0}},children:[(0,i.jsxs)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:14,marginBottom:2,marginLeft:8},children:[t.nameKey?e.formatMessage({id:t.nameKey}):t.name,t.descriptionKey&&(0,i.jsxs)("span",{style:{color:"var(--ant-color-text-secondary)",fontSize:12,marginLeft:0},children:["\uFF08",e.formatMessage({id:t.descriptionKey}),"\uFF09"]}),!t.descriptionKey&&t.description&&(0,i.jsxs)("span",{style:{color:"var(--ant-color-text-secondary)",fontSize:12,marginLeft:0},children:["\uFF08",t.description,"\uFF09"]})]}),(0,i.jsxs)("div",{style:{fontSize:28,color:n,fontWeight:500,alignSelf:"center"},children:[t.value,(0,i.jsx)("span",{style:{fontSize:18,color:"var(--ant-color-text-secondary)",marginLeft:4},children:"\u2103"})]})]})},t.name+r);})})});}function j(){let e=(0,S.useIntl)(),{ip:t,port:r}=(0,g.useWebSocketConfig)(),[n,u]=(0,b.useState)(!1),[c,m]=(0,b.useState)(void 0),[h,T]=(0,b.useState)(void 0),[A,x]=(0,b.useState)(void 0),[M,N]=(0,b.useState)(void 0),{message:w}=d.default.useApp(),Q=async(n=!1)=>{n&&u(!0);try{await (0,v.ensureGroupReady)(t,r);let e=await (0,v.getCurrentGroupAsync)(t,r),n=(0,p.getIccidCmd)(e),i=(0,p.getImsiCmd)(e),a=(0,p.getSimNumCmd)(e),o=(0,p.getVoltageCmd)(e),s=await (0,v.safeSendAT)(n),l=await (0,v.safeSendAT)(i),d=await (0,v.safeSendAT)(a),u=await (0,v.safeSendAT)(o);m((0,p.parseIccid)(s,e)),T((0,p.parseImsi)(l,e)),x((0,p.parseSimNum)(d,e)),N((0,p.parseVoltage)(u,e));}catch(r){let t=(0,y.formatErrorMessage)(r,e);w.error(e.formatMessage({id:"pages.network.systemInfoFailed"})+": "+t);}finally{n&&u(!1);}};return(0,b.useEffect)(()=>(f.default.getStatus&&"open"===f.default.getStatus()?Q(!0):f.default.addOnOpenCallback(()=>Q(!0)),()=>{f.default.removeOnOpenCallback(()=>Q(!0));}),[t,r]),(0,i.jsx)(s.default,{title:e.formatMessage({id:"pages.network.basicInfo"}),extra:(0,i.jsx)(l.default,{className:"my-btn",size:"small",loading:n,onClick:()=>Q(!0),icon:(0,i.jsx)(C.default,{}),children:e.formatMessage({id:"pages.network.refresh"})}),className:"my-card",children:(0,i.jsxs)(a.default,{gutter:[16,16],children:[(0,i.jsx)(o.default,{xs:24,md:6,children:(0,i.jsxs)("div",{style:{borderRadius:4,padding:"12px 16px",background:"var(--ant-color-fill-tertiary)"},children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:14,marginBottom:0},children:e.formatMessage({id:"pages.network.simNumber"})}),(0,i.jsx)("div",{style:{color:"var(--ant-color-primary)",fontSize:16,fontWeight:500},children:A||"-"})]})}),(0,i.jsx)(o.default,{xs:24,md:6,children:(0,i.jsxs)("div",{style:{borderRadius:4,padding:"12px 16px",background:"var(--ant-color-fill-tertiary)"},children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:14,marginBottom:0},children:e.formatMessage({id:"pages.network.imsi"})}),(0,i.jsx)("div",{style:{color:"var(--ant-color-primary)",fontSize:16,fontWeight:500},children:h||"-"})]})}),(0,i.jsx)(o.default,{xs:24,md:6,children:(0,i.jsxs)("div",{style:{borderRadius:4,padding:"12px 16px",background:"var(--ant-color-fill-tertiary)"},children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:14,marginBottom:0},children:e.formatMessage({id:"pages.network.iccid"})}),(0,i.jsx)("div",{style:{color:"var(--ant-color-primary)",fontSize:16,fontWeight:500},children:c||"-"})]})}),(0,i.jsx)(o.default,{xs:24,md:6,children:(0,i.jsxs)("div",{style:{borderRadius:4,padding:"12px 16px",background:"var(--ant-color-fill-tertiary)"},children:[(0,i.jsx)("div",{style:{color:"var(--ant-color-text-secondary)",fontSize:14,marginBottom:0},children:e.formatMessage({id:"pages.network.voltage"})}),(0,i.jsx)("div",{style:{color:"var(--ant-color-primary)",fontSize:16,fontWeight:500},children:M?`${M} V`:"-"})]})})]})});}}}]);